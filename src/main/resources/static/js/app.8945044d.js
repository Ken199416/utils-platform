(function(e){function t(t){for(var a,s,i=t[0],l=t[1],c=t[2],d=0,p=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&p.push(n[s][0]),n[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],a=!0,i=1;i<r.length;i++){var l=r[i];0!==n[l]&&(a=!1)}a&&(o.splice(t--,1),e=s(s.s=r[0]))}return e}var a={},n={app:0},o=[];function s(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=a,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(r,a,function(t){return e[t]}.bind(null,a));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"172a":function(e,t,r){"use strict";var a=r("4b15"),n=r.n(a);n.a},"17f6":function(e,t,r){e.exports=r.p+"img/userLogo.26410557.jpg"},"34e1":function(e,t,r){"use strict";var a=r("6055"),n=r.n(a);n.a},"4b15":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},o=[],s={name:"app"},i=s,l=r("2877"),c=Object(l["a"])(i,n,o,!1,null,null,null),u=c.exports,d=r("8c4f"),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login_container"},[r("div",{staticClass:"login_title"},[e._v(e._s(e.title))]),r("div",{staticClass:"login_box"},[e._m(0),r("div",[r("el-form",{ref:"loginFormRef",staticClass:"login_form",attrs:{rules:e.rules,model:e.form,"label-width":"70px"}},[r("el-form-item",{attrs:{label:"用户",prop:"username"}},[r("el-input",{attrs:{"prefix-icon":"el-icon-user",placeholder:"请输入用户名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login()}},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password","prefix-icon":"el-icon-key",placeholder:"请输入密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login()}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),r("el-form-item",{staticClass:"btns"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.login()}}},[e._v("登录")])],1)],1)],1)]),r("el-dialog",{attrs:{title:"项目初始化",visible:e.dialogVisible,width:"50%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"createYmlRef",attrs:{rules:e.initProjectRules,"label-position":"right",model:e.ymlConfig}},[r("el-form-item",{attrs:{label:"数据库用户名",prop:"datasourceUsername"}},[r("el-input",{model:{value:e.ymlConfig.datasourceUsername,callback:function(t){e.$set(e.ymlConfig,"datasourceUsername",t)},expression:"ymlConfig.datasourceUsername"}})],1),r("el-form-item",{attrs:{label:"数据库密码",prop:"datasourcePassword"}},[r("el-input",{model:{value:e.ymlConfig.datasourcePassword,callback:function(t){e.$set(e.ymlConfig,"datasourcePassword",t)},expression:"ymlConfig.datasourcePassword"}})],1),r("el-form-item",{attrs:{label:"数据库连接地址",prop:"datasourceUrl"}},[r("el-input",{model:{value:e.ymlConfig.datasourceUrl,callback:function(t){e.$set(e.ymlConfig,"datasourceUrl",t)},expression:"ymlConfig.datasourceUrl"}})],1),r("el-form-item",{attrs:{label:"登录用户名",prop:"loginUsername"}},[r("el-input",{model:{value:e.ymlConfig.loginUsername,callback:function(t){e.$set(e.ymlConfig,"loginUsername",t)},expression:"ymlConfig.loginUsername"}})],1),r("el-form-item",{attrs:{label:"登录密码",prop:"loginPassword"}},[r("el-input",{model:{value:e.ymlConfig.loginPassword,callback:function(t){e.$set(e.ymlConfig,"loginPassword",t)},expression:"ymlConfig.loginPassword"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.createYml()}}},[e._v("初始化")]),r("el-button",{on:{click:function(t){return e.resetYmlConfig()}}},[e._v("重置")])],1)],1)],1)],1)},m=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"avatar_box"},[a("img",{attrs:{src:r("da50"),alt:"平台首页"}})])}],g=(r("96cf"),r("1da1")),f={data:function(){return{dialogVisible:!1,title:"圈外测试平台",form:{username:"",password:""},rules:{username:[{required:!0,message:"请输入您的用户名",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入您的密码",trigger:"blur"},{min:4,max:20,message:"长度在 4 到 20 个字符",trigger:"blur"}]},initProjectRules:{datasourceUsername:[{required:!0,message:"请输入数据库用户名",trigger:"blur"}],datasourcePassword:[{required:!0,message:"请选择数据库密码",trigger:"blur"}],datasourceUrl:[{required:!0,message:"请输入数据库连接地址",trigger:"blur"}],serverPort:[{required:!0,message:"请输入服务器端口号",trigger:"blur"}],loginUsername:[{required:!0,message:"请输入登录用户名",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}],loginPassword:[{required:!0,message:"请输入登录密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}]},ymlConfig:{datasourceUsername:"",datasourcePassword:"",datasourceUrl:"",loginUsername:"",loginPassword:""}}},methods:{reset:function(){this.$refs.loginFormRef.resetFields()},openInitProjectDialog:function(){this.dialogVisible=!0},createYml:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.createYmlRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=8;break}return t.next=3,e.$common.post("/createYmlConfig",e.ymlConfig);case 3:a=t.sent,console.log(a),1e4===a.code?(e.$message.success("程序初始化成功，请等待30s后，即可登录使用"),e.dialogVisible=!1):e.$message.error("服务初始化失败，请重试或者联系Ken!"),t.next=9;break;case 8:return t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},resetYmlConfig:function(){this.$refs.createYmlRef.resetFields()},login:function(){var e=this;this.$refs.loginFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=8;break}return t.next=3,e.$http.post("/login",e.form);case 3:a=t.sent,n=a.data,1e4==n.code?(e.$message.success(n.msg),window.localStorage.setItem("token",n.extend),window.localStorage.setItem("customerName",n.data.customerName),e.$router.push("/home")):e.$message.error(n.msg),t.next=8;break;case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},register:function(){this.$message("注册功能尚未开放,请微信联系我")},handleClose:function(){this.resetYmlConfig(),this.dialogVisible=!1},test:function(){var e=this;this.$http.post("/other",this.form).then((function(t){console.log(t.data),40004==t.data.code?e.$message.error(t.data.msg):e.$message.error("未知错误")}))}}},h=f,b=(r("b515"),Object(l["a"])(h,p,m,!1,null,"2d50ce82",null)),w=b.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"home_container"},[a("el-header",[a("div",[a("img",{staticClass:"logoImg",attrs:{src:r("17f6"),alt:"用户头像",height:"40px "}})]),a("span",{staticStyle:{"margin-left":"80%"}},[a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex,"background-color":"#373d41","active-text-color":"while","text-color":"#F5F7F8",mode:"horizontal"},on:{select:e.select}},[a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("span",{staticStyle:{"font-size":"18px"}},[e._v(e._s(""==e.customerName?"空昵称":e.customerName))])]),a("el-menu-item",{attrs:{index:"1-1"}},[e._v("我的信息")]),a("el-menu-item",{attrs:{index:"1-2"}},[e._v("反馈问题")]),a("el-menu-item",{attrs:{index:"1-3"}},[e._v("退出")])],2)],1)],1),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.toChangeProject()}}},[e._v(e._s(null==this.$global.currentProjectName?"全平台":this.$global.currentProjectName))])],1),a("el-container",[a("el-aside",{attrs:{width:e.aside+"px"}},[a("div",{staticClass:"toggle-button",on:{click:function(t){return e.toggleChange()}}},[a("i",{class:e.toggleIcon})]),a("el-menu",{attrs:{"background-color":"#333744","text-color":"#fff","active-text-color":"#409BFF","unique-opened":!0,collapse:e.isCollapse,"collapse-transition":!1,router:!0,"default-active":e.currentMenu}},e._l(e.menuList,(function(t){return a("el-submenu",{key:t.id,attrs:{index:t.path}},[a("template",{slot:"title"},[a("i",{class:t.icon}),a("span",[e._v(e._s(t.menuName))])]),e._l(t.children,(function(t){return a("el-menu-item",{key:t.id,attrs:{index:t.path},on:{click:function(r){return e.clickMenu(t.path)}}},[a("template",{slot:"title"},[a("i",{class:t.icon}),a("span",[e._v(e._s(t.menuName))])])],2)}))],2)})),1)],1),a("el-main",[a("el-drawer",{attrs:{visible:e.drawer,direction:"ttb",size:"400px"},on:{"update:visible":function(t){e.drawer=t}}},[a("el-row",[a("el-col",{staticStyle:{"margin-top":"30px","margin-left":"2%","margin-right":"2%"},attrs:{span:3}},[a("div",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.delProject()}}},[a("el-card",{staticStyle:{"background-color":"#479DE3",height:"75px","border-radius":"15px"}},[a("div",{staticStyle:{"text-align":"center","font-size":"25px","font-color":"while"}},[a("span",[e._v("全平台")])])])],1)]),e._l(e.projectList,(function(t){return a("el-col",{key:t.id,staticStyle:{"margin-top":"30px","margin-left":"2%","margin-right":"2%"},attrs:{span:3}},[a("div",{staticStyle:{cursor:"pointer"},on:{click:function(r){return e.changeProject(t.id,t.name)}}},[a("el-card",{staticStyle:{"background-color":"#479DE3",height:"75px","border-radius":"15px"}},[a("div",{staticStyle:{"text-align":"center","font-size":"25px","font-color":"while"}},[a("span",[e._v(e._s(t.name))])])])],1)])}))],2)],1),a("keep-alive",[e.$route.meta.keepAlive?a("router-view"):e._e()],1),e.$route.meta.keepAlive?e._e():a("router-view"),a("div",{staticStyle:{"margin-top":"50px","margin-left":"45%"}},[a("el-button",{attrs:{icon:"el-icon-phone-outline"},on:{click:function(t){return e.callMe()}}},[e._v("Author")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"该平台留有多处明显BUG，发现者联系我，发5元微信红包",placement:"top",enterable:!1}},[a("el-button",{attrs:{icon:"el-icon-info"}})],1)],1)],1)],1)],1)},y=[],x={data:function(){return{title:"Home",menuList:[],isCollapse:!1,aside:200,toggleIcon:"el-icon-s-fold",currentMenu:"/project/single",customerName:"",drawer:!1,activeIndex:"",projectList:[],currentProjectId:"",currentProjectName:""}},methods:{callMe:function(){this.$alert("作者微信：HMJ_KEN")},logout:function(){window.localStorage.removeItem("token"),window.sessionStorage.removeItem("currentMenu"),window.sessionStorage.removeItem("projectId"),window.sessionStorage.removeItem("projectName"),this.$message.success("您已退出"),this.$router.push("/login")},getMenu:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/getMenu");case 2:r=t.sent,a=r.data,1e4!=a.code?e.$message.error(a.msg):e.menuList=a.data;case 5:case"end":return t.stop()}}),t)})))()},toggleChange:function(){this.isCollapse=!this.isCollapse,200==this.aside?(this.aside=64,this.toggleIcon="el-icon-s-unfold"):(this.aside=200,this.toggleIcon="el-icon-s-fold")},clickMenu:function(e){window.sessionStorage.setItem("currentMenu",e)},getLastMenu:function(){this.currentMenu=window.sessionStorage.getItem("currentMenu")},toChangeProject:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.drawer=!0,t.next=3,e.$common.getAllProject();case 3:e.projectList=t.sent;case 4:case"end":return t.stop()}}),t)})))()},changeProject:function(e,t){window.sessionStorage.setItem("projectId",e),window.sessionStorage.setItem("projectName",t),location.reload()},delProject:function(){window.sessionStorage.removeItem("projectId"),window.sessionStorage.removeItem("projectName"),location.reload()},select:function(e){console.log(e),"1-3"==e&&this.logout()}},created:function(){this.getMenu(),this.getLastMenu(),null!=window.sessionStorage.getItem("projectId")&&null!=window.sessionStorage.getItem("projectName")&&(this.$global.currentProjectId=window.sessionStorage.getItem("projectId"),this.$global.currentProjectName=window.sessionStorage.getItem("projectName")),this.customerName=window.localStorage.getItem("customerName"),console.log(this.currentProjectName)}},C=x,k=(r("34e1"),Object(l["a"])(C,v,y,!1,null,"69271d87",null)),S=k.exports,j=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},$=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("Welcome")])])}],R={},_=R,I=Object(l["a"])(_,j,$,!1,null,"31605686",null),L=I.exports,F=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"正在努力调用接口..."}},[r("el-breadcrumb",[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("用例管理")]),r("el-breadcrumb-item",[e._v("单接口用例")])],1),r("el-card",[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:3}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择协议"},model:{value:e.queryCaseListParams.protocolId,callback:function(t){e.$set(e.queryCaseListParams,"protocolId",t)},expression:"queryCaseListParams.protocolId"}},e._l(e.protocolsOptions,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),""==this.currentProjectId?r("el-col",{attrs:{span:3}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择项目"},model:{value:e.queryCaseListParams.projectId,callback:function(t){e.$set(e.queryCaseListParams,"projectId",t)},expression:"queryCaseListParams.projectId"}},e._l(e.projectOptions,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1):r("el-col",{attrs:{span:3}},[r("el-select",{attrs:{clearable:"",disabled:"",placeholder:"请选择项目"},model:{value:e.currentProjectName,callback:function(t){e.currentProjectName=t},expression:"currentProjectName"}})],1),r("el-col",{attrs:{span:4}},[r("el-input",{attrs:{placeholder:"请输入Case用例名",clearable:""},on:{clear:function(t){return e.getCaseList()}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getCaseList()}},model:{value:e.queryCaseListParams.query,callback:function(t){e.$set(e.queryCaseListParams,"query",t)},expression:"queryCaseListParams.query"}})],1),r("el-col",{attrs:{span:2}},[r("el-button",{attrs:{icon:"el-icon-search"},on:{click:function(t){return e.getCaseListBySelect()}}})],1),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.toAddCaseAction()}}},[e._v("添加Case")])],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.caseList,border:"",height:"650"}},[r("el-table-column",{attrs:{fixed:"",type:"index",label:"#",width:"40px"}}),r("el-table-column",{attrs:{prop:"name",label:"用例名称",width:"190"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{placement:"right",width:"400px",trigger:"hover"}},[r("el-card",{staticClass:"box-card"},[r("div",[r("span",[e._v("用例描述：")]),r("span",[e._v(e._s(null!=t.row.desc?t.row.desc:"无"))])])]),r("div",{staticStyle:{cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(t.row.name))])],1)]}}])}),r("el-table-column",{attrs:{prop:"projectName",label:"所属项目",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{type:"warning"}},[e._v(e._s(t.row.projectName))])]}}])}),r("el-table-column",{attrs:{prop:"protocolId",label:"请求方式",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.protocolId?r("el-tag",{attrs:{type:"success"}},[e._v("GET")]):e._e(),2==t.row.protocolId?r("el-tag",{attrs:{type:"danger"}},[e._v("POST")]):e._e()]}}])}),r("el-table-column",{attrs:{prop:"url",label:"请求url",width:"250"}}),r("el-table-column",{attrs:{prop:"assertFlag",label:"断言标志",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.assertFlag.split("<==>"),(function(t,a){return r("span",{key:a},[e._v(" "+e._s(t)+" "),r("br")])}))}}])}),r("el-table-column",{attrs:{prop:"assertContent",label:"断言内容",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.assertContent.split("<==>"),(function(t,a){return r("span",{key:a},[e._v(" "+e._s(t)+" "),r("br")])}))}}])}),r("el-table-column",{attrs:{prop:"preCaseGroup",label:"前置用例集","min-width":"250"}}),r("el-table-column",{attrs:{fixed:"right",label:"状态",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.del?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"停用该用例",placement:"top",enterable:!1}},[t.row.del?r("el-switch",{on:{change:function(r){return e.changeDel(t.row)}},model:{value:t.row.del,callback:function(r){e.$set(t.row,"del",r)},expression:"scope.row.del"}}):e._e()],1):e._e(),t.row.del?e._e():r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"继续使用该用例",placement:"top",enterable:!1}},[t.row.del?e._e():r("el-switch",{on:{change:function(r){return e.changeDel(t.row)}},model:{value:t.row.del,callback:function(r){e.$set(t.row,"del",r)},expression:"scope.row.del"}})],1)]}}])}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.del?r("el-button",{attrs:{type:"primary",icon:"el-icon-edit-outline",size:"mini"},on:{click:function(r){return e.toEditCaseAction(t.row)}}},[e._v("编辑")]):e._e(),t.row.del?r("el-button",{attrs:{type:"primary",icon:"el-icon-video-play",size:"mini"},on:{click:function(r){return e.runCaseById(t.row.id)}}},[e._v("执行")]):e._e(),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"查看用例执行记录",placement:"top",enterable:!1}},[r("el-button",{attrs:{size:"mini",icon:"el-icon-view"},on:{click:function(r){return e.getExecuteRecoding(t.row.id)}}})],1)]}}])})],1),r("el-pagination",{attrs:{"current-page":e.queryCaseListParams.pageNum,"page-sizes":[10,15,20,50],"page-size":e.queryCaseListParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.caseCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-dialog",{attrs:{title:"执行结果","close-on-click-modal":!1,visible:e.executeResponseDialog,width:"80%"},on:{"update:visible":function(t){e.executeResponseDialog=t}}},[r("el-form",{attrs:{"label-width":"80px",model:e.caseResult}},[r("el-form-item",{attrs:{label:"响应结果"}},[r("el-input",{attrs:{contenteditable:"true",type:"textarea",rows:"20"},model:{value:e.caseResult.responseStr,callback:function(t){e.$set(e.caseResult,"responseStr",t)},expression:"caseResult.responseStr"}})],1),r("el-form-item",{attrs:{label:"断言结果"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.caseResult.assertDomains}},[r("el-table-column",{attrs:{prop:"nameValue",label:"断言表达式",width:"300"}}),r("el-table-column",{attrs:{prop:"paramValue",label:"断言内容",width:"300"}}),r("el-table-column",{attrs:{prop:"paramDesc",label:"断言结果"}})],1)],1),r("el-form-item",{attrs:{label:"参数截取"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.caseResult.paramsDomains}},[r("el-table-column",{attrs:{prop:"nameValue",label:"参数截取标志",width:"300"}}),r("el-table-column",{attrs:{prop:"paramValue",label:"参数引用名",width:"300"}}),r("el-table-column",{attrs:{prop:"paramDesc",label:"参数描述"}})],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.executeResponseDialog=!1}}},[e._v("我知道了")])],1)],1)],1)},P=[],D={data:function(){return{drawer:!1,loading:!1,textareaHigh:5,protocolsOptions:[],projectOptions:[],queryCaseListParams:{query:"",pageNum:1,pageSize:10,protocolId:"",projectId:""},delCaseParam:{cid:0,flag:!0},caseList:[],caseCount:0,caseGroupList:{},queryForm:{query:"",pageNum:1,pageSize:50},currentProjectId:"",currentProjectName:"",executeResponseDialog:!1,caseResult:{}}},methods:{toEditCaseAction:function(e){this.$router.push("/case/single/action/"+e.id)},toAddCaseAction:function(){this.$router.push("/case/single/action/add")},getCaseListBySelect:function(){this.queryCaseListParams.pageNum=1,this.getCaseList()},getCaseList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/getAllCase",{params:e.queryCaseListParams});case 2:r=t.sent,a=r.data,1e4!=a.code?(e.caseList=a.data,e.$message.error(a.msg)):(e.caseList=a.data,e.caseCount=a.caseCount);case 5:case"end":return t.stop()}}),t)})))()},delCase:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.delCaseParam.cid=e.id,t.delCaseParam.flag=e.del,r.next=4,t.$http.get("/toDelCase",{params:t.delCaseParam});case 4:a=r.sent,n=a.data,1e4!=n.code&&t.$message.error("服务器开小差了，请稍后重试或者联系管理员！"),e.del?t.$message({type:"success",message:"该用例已恢复使用!"}):t.$message({type:"success",message:"该用例已停用!"}),t.getCaseList();case 9:case"end":return r.stop()}}),r)})))()},changeDel:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.del){r.next=5;break}return r.next=3,t.$confirm("是否停用该用例?","提示",{confirmButtonText:"停用",cancelButtonText:"取消",type:"warning"}).then((function(){t.delCase(e)})).catch((function(){t.getCaseList(),t.$message({type:"info",message:"已取消停用"})}));case 3:r.next=7;break;case 5:return r.next=7,t.$confirm("是否恢复使用该用例?","提示",{confirmButtonText:"恢复",cancelButtonText:"取消",type:"warning"}).then((function(){t.delCase(e)})).catch((function(){t.getCaseList(),t.$message({type:"info",message:"已取消恢复使用"})}));case 7:case"end":return r.stop()}}),r)})))()},handleSizeChange:function(e){this.queryCaseListParams.pageSize=e,this.getCaseList()},handleCurrentChange:function(e){this.queryCaseListParams.pageNum=e,this.getCaseList()},closeAdd:function(){this.$refs.addCaseFormRef.resetFields(),this.textareaHigh=4},getProtocol:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/getAllProtocol");case 2:r=t.sent,a=r.data,e.protocolsOptions=a.data;case 5:case"end":return t.stop()}}),t)})))()},getProject:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$common.getAllProject().then((function(t){e.projectOptions=t}));case 1:case"end":return t.stop()}}),t)})))()},runCaseById:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.loading=!0,r.next=3,t.$http.get("/runCaseById?id="+e);case 3:a=r.sent,n=a.data,t.loading=!1,1e4==n.code?(t.$message.success(n.msg),t.caseResult=n.params,t.executeResponseDialog=!0):(t.$message.error(n.msg),t.caseResult=n.params,t.executeResponseDialog=!0);case 7:case"end":return r.stop()}}),r)})))()},getExecuteRecoding:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$router.push("/case/executeRecoding/"+e);case 1:case"end":return r.stop()}}),r)})))()},changeProject:function(e,t){window.sessionStorage.setItem("projectId",e),window.sessionStorage.setItem("projectName",t),location.reload()},delProject:function(){window.sessionStorage.removeItem("projectId"),window.sessionStorage.removeItem("projectName"),location.reload()}},created:function(){null!=window.sessionStorage.getItem("projectId")&&(this.queryCaseListParams.projectId=window.sessionStorage.getItem("projectId"),this.currentProjectName=window.sessionStorage.getItem("projectName"),this.currentProjectId=window.sessionStorage.getItem("projectId")),this.getCaseList(),this.getProtocol(),this.getProject()},beforeRouteLeave:function(e,t,r){e.meta.keepAlive=!1,r()}},O=D,q=Object(l["a"])(O,F,P,!1,null,"370c82dc",null),G=q.exports,A=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"正在努力调用接口..."}},[r("el-breadcrumb",[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("用例管理")]),r("el-breadcrumb-item",[e._v("接口用例集")])],1),r("el-card",[r("el-row",{attrs:{gutter:10}},[null==this.$global.currentProjectId&&null==this.$global.currentProjectName?r("el-col",{attrs:{span:3}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择项目"},model:{value:e.queryCaseGroupListParams.projectId,callback:function(t){e.$set(e.queryCaseGroupListParams,"projectId",t)},expression:"queryCaseGroupListParams.projectId"}},e._l(e.projectOptions,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1):r("el-col",{attrs:{span:3}},[r("el-select",{attrs:{disabled:"",clearable:"",placeholder:"请选择项目"},model:{value:this.$global.currentProjectName,callback:function(t){e.$set(this.$global,"currentProjectName",t)},expression:"this.$global.currentProjectName"}},e._l(e.projectOptions,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-col",{attrs:{span:4}},[r("el-input",{attrs:{placeholder:"请输入Case用例集名称",clearable:""},on:{clear:function(t){return e.getAllCaseGroup()}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getCaseList()}},model:{value:e.queryCaseGroupListParams.query,callback:function(t){e.$set(e.queryCaseGroupListParams,"query",t)},expression:"queryCaseGroupListParams.query"}})],1),r("el-col",{attrs:{span:2}},[r("el-button",{attrs:{icon:"el-icon-search"},on:{click:function(t){return e.getCaseGroupListBySelect()}}})],1),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:15}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addCaseGroupDialog=!0}}},[e._v("添加Case集")])],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.caseGroupList,border:"",height:"670"}},[r("el-table-column",{attrs:{type:"expand",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.caseList.length>0?[r("el-steps",{attrs:{active:t.row.executeIndex,"process-status":"process","finish-status":"success","align-center":""}},e._l(t.row.caseList,(function(e,t){return r("el-step",{key:t,attrs:{title:e.name,status:e.result?"":"error",description:e.desc}})})),1),0==t.row.executeIndex?r("el-button",{staticStyle:{"margin-top":"12px"},on:{click:function(r){return e.next(t)}}},[e._v("开 始")]):t.row.executeIndex==t.row.caseTotal?r("el-button",{staticStyle:{"margin-top":"12px"},on:{click:function(r){return e.next(t)}}},[e._v("重新执行")]):r("el-button",{staticStyle:{"margin-top":"12px"},on:{click:function(r){return e.next(t)}}},[e._v("下一步")]),r("el-button",{staticStyle:{"margin-top":"12px"},on:{click:function(r){return e.resetActive(t)}}},[e._v("重 置")])]:void 0}}],null,!0)}),r("el-table-column",{attrs:{prop:"name",label:"用例集名称",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{placement:"right",width:"400px",trigger:"click","width:300px":""}},[r("el-table",{attrs:{data:t.row.caseList,border:""}},[r("el-table-column",{attrs:{width:"70",property:"pri",label:"优先级"}}),r("el-table-column",{attrs:{width:"200",property:"name",label:"用例名"}}),r("el-table-column",{attrs:{width:"350",property:"desc",label:"描述"}})],1),r("div",{staticStyle:{cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(t.row.name))])],1)]}}])}),r("el-table-column",{attrs:{prop:"projectId",label:"所属项目",width:"90%"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{type:"warning"}},[e._v(e._s(t.row.projectName))])]}}])}),r("el-table-column",{attrs:{prop:"",label:"动态参数",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.reference,(function(t,a){return r("span",{key:a},[r("el-tooltip",{attrs:{content:t.referenceDesc,placement:"top"}},[r("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary",plain:"",size:"mini"}},[e._v(e._s(t.referenceName))])],1),r("br")],1)}))}}])}),r("el-table-column",{attrs:{prop:"caseGroupDescribe",label:"用例集描述",width:"250"}}),r("el-table-column",{attrs:{prop:"waitTime",label:"等待时间( S )",width:"75"}}),r("el-table-column",{attrs:{label:"状态",width:"65"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.del?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"停用该用例集",placement:"top",enterable:!1}},[r("el-switch",{on:{change:function(r){return e.changeDel(t.row)}},model:{value:t.row.del,callback:function(r){e.$set(t.row,"del",r)},expression:"scope.row.del"}})],1):r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"继续使用该用例集",placement:"top",enterable:!1}},[r("el-switch",{on:{change:function(r){return e.changeDel(t.row)}},model:{value:t.row.del,callback:function(r){e.$set(t.row,"del",r)},expression:"scope.row.del"}})],1)]}}])}),r("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑此用例集",placement:"top",enterable:!1}},[t.row.del?r("el-button",{attrs:{size:"mini",type:"success",plain:"",icon:"el-icon-edit"},on:{click:function(r){return e.openEditDialog(t.row.id)}}}):e._e()],1),t.row.del?r("el-button",{attrs:{type:"primary",icon:"el-icon-edit-outline",size:"mini"},on:{click:function(r){return e.openAddCaseDialog(t.row)}}},[e._v("分配用例")]):e._e(),r("br"),r("br"),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"执行该用例集",placement:"top",enterable:!1}},[t.row.del?r("el-button",{attrs:{size:"mini",type:"primary",plain:"",icon:"el-icon-video-play"},on:{click:function(r){return e.runCaseGroup(t.row)}}}):e._e()],1),t.row.del?r("el-button",{attrs:{type:"primary",icon:"el-icon-edit-outline",size:"mini"},on:{click:function(r){return e.openEditCaseDialog(t.row)}}},[e._v("调整用例")]):e._e()]}}])})],1),r("el-pagination",{attrs:{"current-page":e.queryCaseGroupListParams.pageNum,"page-sizes":[10,15,20,50],"page-size":e.queryCaseGroupListParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.caseGroupTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-dialog",{attrs:{title:"执行结果","close-on-click-modal":!1,visible:e.executeCaseByIndexResponse,width:"80%"},on:{"update:visible":function(t){e.executeCaseByIndexResponse=t}}},[r("el-form",{attrs:{"label-width":"80px",model:e.caseResult}},[r("el-form-item",{attrs:{label:"响应结果"}},[r("el-input",{attrs:{contenteditable:"true",type:"textarea",rows:"10"},model:{value:e.caseResult.responseStr,callback:function(t){e.$set(e.caseResult,"responseStr",t)},expression:"caseResult.responseStr"}})],1),r("el-form-item",{attrs:{label:"断言结果"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.caseResult.assertDomains}},[r("el-table-column",{attrs:{prop:"nameValue",label:"断言表达式",width:"300"}}),r("el-table-column",{attrs:{prop:"paramValue",label:"断言内容",width:"300"}}),r("el-table-column",{attrs:{prop:"paramDesc",label:"断言结果"}})],1)],1),r("el-form-item",{attrs:{label:"参数截取"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.caseResult.paramsDomains}},[r("el-table-column",{attrs:{prop:"nameValue",label:"参数引用名",width:"300"}}),r("el-table-column",{attrs:{prop:"paramValue",label:"参数描述",width:"300"}})],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.executeCaseByIndexResponse=!1}}},[e._v("我知道了")])],1)],1),r("el-dialog",{attrs:{title:"执行成功，断言失败！！！","close-on-click-modal":!1,visible:e.executeErrorDialog,width:"80%"},on:{"update:visible":function(t){e.executeErrorDialog=t}}},[r("div",{staticStyle:{"font-size":"18px",color:"red","margin-bottom":"30px"}},[e._v("用例在第"+e._s(e.errorCaseIndex)+"步执行失败！！！ ===> 用例【"+e._s(e.caseErrorResult.name)+"】具体执行信息如下： ")]),r("el-form",{attrs:{"label-width":"80px",model:e.caseErrorResult}},[2==e.caseErrorResult.protocolId&&1==e.caseErrorResult.paramsType?r("el-form-item",{attrs:{label:"请求参数"}},[r("el-input",{attrs:{contenteditable:"true",type:"textarea",rows:"10"},model:{value:e.caseErrorResult.jsonParams,callback:function(t){e.$set(e.caseErrorResult,"jsonParams",t)},expression:"caseErrorResult.jsonParams"}})],1):e._e(),2==e.caseErrorResult.protocolId&&2==e.caseErrorResult.paramsType?r("el-form-item",{attrs:{label:"请求参数"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.caseErrorResult.domains}},[r("el-table-column",{attrs:{prop:"nameValue",label:"参数名",width:"300"}}),r("el-table-column",{attrs:{prop:"paramValue",label:"参数值"}})],1)],1):e._e(),r("el-form-item",{attrs:{label:"响应结果"}},[r("el-input",{attrs:{contenteditable:"true",type:"textarea",rows:"10"},model:{value:e.caseErrorResult.responseStr,callback:function(t){e.$set(e.caseErrorResult,"responseStr",t)},expression:"caseErrorResult.responseStr"}})],1),r("el-form-item",{attrs:{label:"断言结果"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.caseErrorResult.assertDomains}},[r("el-table-column",{attrs:{prop:"nameValue",label:"断言表达式",width:"300"}}),r("el-table-column",{attrs:{prop:"paramValue",label:"断言内容",width:"300"}}),r("el-table-column",{attrs:{prop:"paramDesc",label:"断言结果"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.paramDesc))])]}}])})],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.executeErrorDialog=!1}}},[e._v("我知道了")])],1)],1),r("el-dialog",{attrs:{"close-on-click-modal":!1,title:"用例集添加",visible:e.addCaseGroupDialog,width:"50%"},on:{"update:visible":function(t){e.addCaseGroupDialog=t},close:function(t){return e.closeAdd()}}},[r("span"),r("el-form",{ref:"addCaseGroupFormRef",attrs:{rules:e.addCaseGroupFormRules,model:e.addCaseGroupForm,"label-width":"100px"}},[r("el-form-item",{staticClass:"input-center",staticStyle:{"margin-left":"150px","margin-right":"150px"},attrs:{label:"用例集名称",prop:"name"}},[r("el-input",{staticStyle:{width:"93%"},attrs:{"prefix-icon":"el-icon-edit",placeholder:"请输入用例集名"},model:{value:e.addCaseGroupForm.name,callback:function(t){e.$set(e.addCaseGroupForm,"name",t)},expression:"addCaseGroupForm.name"}})],1),null==this.$global.currentProjectId&&null==this.$global.currentProjectName?r("el-form-item",{staticStyle:{"margin-left":"150px","margin-right":"150px"},attrs:{label:"所属项目",prop:"projectId"}},[r("el-select",{staticStyle:{width:"93%"},attrs:{placeholder:"请选择所属项目"},model:{value:e.addCaseGroupForm.projectId,callback:function(t){e.$set(e.addCaseGroupForm,"projectId",t)},expression:"addCaseGroupForm.projectId"}},e._l(e.projectOptions,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1):r("el-form-item",{staticStyle:{"margin-left":"150px","margin-right":"150px"},attrs:{label:"所属项目",prop:"projectId"}},[r("el-select",{staticStyle:{width:"93%"},attrs:{disabled:"",placeholder:"请选择所属项目"},model:{value:this.$global.currentProjectName,callback:function(t){e.$set(this.$global,"currentProjectName",t)},expression:"this.$global.currentProjectName"}},e._l(e.projectOptions,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{staticClass:"input-center",staticStyle:{"margin-left":"150px","margin-right":"150px"},attrs:{label:"用例集描述",prop:"caseGroupDescribe"}},[r("el-input",{staticStyle:{width:"93%"},attrs:{"prefix-icon":"el-icon-edit",placeholder:"请输入用例集描述"},model:{value:e.addCaseGroupForm.caseGroupDescribe,callback:function(t){e.$set(e.addCaseGroupForm,"caseGroupDescribe",t)},expression:"addCaseGroupForm.caseGroupDescribe"}})],1),r("el-form-item",{staticClass:"input-center",staticStyle:{"margin-left":"150px","margin-right":"150px"},attrs:{label:"等待时间",prop:"waitTime"}},[r("el-input",{staticStyle:{width:"93%"},attrs:{"prefix-icon":"el-icon-edit",placeholder:"每条case运行时等待的时间，不填则不做等待"},model:{value:e.addCaseGroupForm.waitTime,callback:function(t){e.$set(e.addCaseGroupForm,"waitTime",t)},expression:"addCaseGroupForm.waitTime"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addCaseGroupDialog=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addCaseGroup()}}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{"close-on-click-modal":!1,title:"用例集编辑",visible:e.editCaseGroupDialog,width:"50%"},on:{"update:visible":function(t){e.editCaseGroupDialog=t},close:function(t){return e.closeEdit()}}},[r("span"),r("el-form",{ref:"editCaseGroupFormRef",attrs:{rules:e.editCaseGroupFormRules,model:e.editCaseGroupForm,"label-width":"100px"}},[r("el-form-item",{staticClass:"input-center",staticStyle:{"margin-left":"150px","margin-right":"150px"},attrs:{label:"用例集名称",prop:"name"}},[r("el-input",{staticStyle:{width:"93%"},attrs:{"prefix-icon":"el-icon-edit",placeholder:"请输入用例集名"},model:{value:e.editCaseGroupForm.name,callback:function(t){e.$set(e.editCaseGroupForm,"name",t)},expression:"editCaseGroupForm.name"}})],1),r("el-form-item",{staticStyle:{"margin-left":"150px","margin-right":"150px"},attrs:{label:"所属项目",prop:"projectId"}},[r("el-select",{staticStyle:{width:"93%"},attrs:{disabled:"",placeholder:"请选择所属项目"},model:{value:e.editCaseGroupForm.projectId,callback:function(t){e.$set(e.editCaseGroupForm,"projectId",t)},expression:"editCaseGroupForm.projectId"}},e._l(e.projectOptions,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{staticClass:"input-center",staticStyle:{"margin-left":"150px","margin-right":"150px"},attrs:{label:"用例集描述",prop:"caseGroupDescribe"}},[r("el-input",{staticStyle:{width:"93%"},attrs:{"prefix-icon":"el-icon-edit",placeholder:"请输入用例集描述"},model:{value:e.editCaseGroupForm.caseGroupDescribe,callback:function(t){e.$set(e.editCaseGroupForm,"caseGroupDescribe",t)},expression:"editCaseGroupForm.caseGroupDescribe"}})],1),r("el-form-item",{staticClass:"input-center",staticStyle:{"margin-left":"150px","margin-right":"150px"},attrs:{label:"等待时间",prop:"waitTime"}},[r("el-input",{staticStyle:{width:"93%"},attrs:{"prefix-icon":"el-icon-edit",placeholder:"每条case运行时等待的时间，不填则不做等待"},model:{value:e.editCaseGroupForm.waitTime,callback:function(t){e.$set(e.editCaseGroupForm,"waitTime",t)},expression:"editCaseGroupForm.waitTime"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editCaseGroupDialog=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editCaseGroup()}}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{"close-on-click-modal":!1,title:"为组件分配用例",visible:e.addCaseDialog,width:"60%"},on:{"update:visible":function(t){e.addCaseDialog=t},close:function(t){return e.closeAddCase()}}},[r("el-form",{ref:"addCaseFormRef",attrs:{rules:e.addCaseFormRules,model:e.addCaseForm,"label-width":"100px"}},[r("el-row",[r("el-col",{attrs:{span:16}},[r("div",{staticClass:"grid-content bg-purple"},[r("el-form-item",{staticStyle:{"margin-left":"50px"},attrs:{label:"执行用例",prop:"caseId"}},[r("el-select",{staticStyle:{width:"80%"},attrs:{filterable:"",remote:"","remote-method":e.getCaseList,placeholder:"输入用例名进行模糊匹配"},model:{value:e.addCaseForm.caseId,callback:function(t){e.$set(e.addCaseForm,"caseId",t)},expression:"addCaseForm.caseId"}},e._l(e.caseList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)]),r("el-col",{attrs:{span:8}},[r("div",{staticClass:"grid-content bg-purple"},[r("el-form-item",{staticStyle:{"margin-right":"0px"},attrs:{label:"执行优先级",prop:"pri"}},[r("el-input",{staticStyle:{width:"60%"},attrs:{"prefix-icon":"el-icon-sort",placeholder:"数值类型"},model:{value:e.addCaseForm.pri,callback:function(t){e.$set(e.addCaseForm,"pri",e._n(t))},expression:"addCaseForm.pri"}})],1)],1)])],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addCaseDialog=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addCase()}}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{"close-on-click-modal":!1,title:"调整组件",visible:e.editCaseDialog,width:"40%"},on:{"update:visible":function(t){e.editCaseDialog=t},close:function(t){return e.closeChange()}}},[r("div",{staticStyle:{"text-align":"center"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.groupCaseList}},[r("el-table-column",{attrs:{prop:"name",label:"用例名称",width:"250"}}),r("el-table-column",{attrs:{prop:"pri",label:"用例优先级",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{on:{blur:function(r){return e.changePri(t.row)}},model:{value:t.row.pri,callback:function(r){e.$set(t.row,"pri",e._n(r))},expression:"scope.row.pri"}})]}}])}),r("el-table-column",{attrs:{prop:"pri",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(r){return e.delGroupCase(t.row)}}})]}}])})],1)],1)])],1)},N=[],T=r("ade3"),E=(r("aa47"),{data:function(){var e,t=function(e,t,r){var a=/^[0-9]*$/;if(a.test(t))return r();r(new Error("请输入正整数"))};return e={drawer:!1,currentGroupId:"",addCaseDialog:!1,editCaseDialog:!1,loading:!1,protocolsOptions:[],projectOptions:[],queryCaseListParams:{query:"",pageNum:1,pageSize:100,protocolId:"",projectId:""},queryCaseGroupListParams:{query:"",pageNum:1,pageSize:10,projectId:""},caseList:[],delCaseGroupParam:{groupId:0,flag:!0},caseGroupList:[],caseGroupTotal:0,addCaseGroupDialog:!1,addCaseGroupForm:{name:"",projectId:"",caseGroupDescribe:"",waitTime:""},componentList:[],addCaseForm:{caseId:"",groupId:"",pri:""},editCaseForm:{},addCaseGroupFormRules:{name:[{required:!0,message:"请输入您的用例名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],projectId:[{required:!0,message:"请选择用例组所属项目",trigger:"blur"}]},addCaseFormRules:{caseId:[{required:!0,message:"请选择要添加的用例",trigger:"blur"}],pri:[{required:!0,message:"请输入执行优先级",trigger:"blur"},{validator:t,trigger:"blur"}]},editCaseFormRules:{}},Object(T["a"])(e,"editCaseDialog",!1),Object(T["a"])(e,"groupCaseList",[]),Object(T["a"])(e,"changePriParams",{}),Object(T["a"])(e,"delGroupCaseParams",{}),Object(T["a"])(e,"caseList",[]),Object(T["a"])(e,"active",0),Object(T["a"])(e,"executeCaseByIndexResponse",!1),Object(T["a"])(e,"caseResult",{}),Object(T["a"])(e,"success","success"),Object(T["a"])(e,"executeResult",!0),Object(T["a"])(e,"editCaseGroupDialog",!1),Object(T["a"])(e,"editCaseGroupForm",{}),Object(T["a"])(e,"editCaseGroupFormRules",{name:[{required:!0,message:"请输入您的用例名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],projectId:[{required:!0,message:"请选择用例组所属项目",trigger:"blur"}]}),Object(T["a"])(e,"executeErrorDialog",!1),Object(T["a"])(e,"caseErrorResult",{}),Object(T["a"])(e,"errorCaseIndex",""),e},methods:{openDebug:function(){console.log("打开")},resetActive:function(e){var t=e.$index;this.caseGroupList[t].executeIndex=0;for(var r=this.caseGroupList[t].caseList,a=0;a<r.length;a++)r[a].result||(r[a].result=!r[a].result)},next:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=e.$index,!(t.caseGroupList[a].executeIndex++>e.row.caseTotal-1)){r.next=5;break}t.caseGroupList[a].executeIndex=0,r.next=10;break;case 5:return t.loading=!0,r.next=8,t.$common.get("/runCaseByIndex?index="+t.caseGroupList[a].executeIndex+"&groupId="+e.row.id);case 8:n=r.sent,1e4==n.code?(t.caseResult=n.params,t.caseGroupList[e.$index].caseList[t.caseGroupList[a].executeIndex-1].result=n.data.success,n.data.success?t.loading=!1:(t.loading=!1,t.$message.error(n.msg)),t.executeCaseByIndexResponse=!0):(t.caseGroupList[e.$index].caseList[t.caseGroupList[a].executeIndex-1].result=!1,t.loading=!1,t.$message.error(n.msg));case 10:case"end":return r.stop()}}),r)})))()},getCaseListByCaseGroupId:function(e,t){var r=this;return Object(g["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.$common.get("/getGroupCaseList?groupId="+t);case 2:a=e.sent,r.caseList=a.data;case 4:case"end":return e.stop()}}),e)})))()},runCaseGroup:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.loading=!0,r.next=3,t.$common.get("/runGroupCaseById?id="+e.id);case 3:a=r.sent,1e4==a.code&&"执行失败"!=a.msg?(t.$message.success(a.msg),t.loading=!1):(t.$message.error(a.msg),t.caseErrorResult=a.data.errorCaseInfo,t.errorCaseIndex=a.total,t.loading=!1,t.executeErrorDialog=!0),t.loading=!1;case 6:case"end":return r.stop()}}),r)})))()},delGroupCase:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.delGroupCaseParams.id=e.crgId,t.delGroupCaseParams.groupId=t.currentGroupId,r.next=4,t.$common.get("/delGroupCase",t.delGroupCaseParams);case 4:a=r.sent,t.groupCaseList=a.data;case 6:case"end":return r.stop()}}),r)})))()},changePri:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.changePriParams.id=e.crgId,t.changePriParams.pri=e.pri,t.changePriParams.groupId=t.currentGroupId,r.next=5,t.$common.get("/updateGroupCase",t.changePriParams);case 5:a=r.sent,t.groupCaseList=a.data;case 7:case"end":return r.stop()}}),r)})))()},openEditCaseDialog:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.currentGroupId=e.id,t.editCaseDialog=!0,r.next=4,t.$common.get("/getGroupCaseList?groupId="+e.id);case 4:a=r.sent,t.groupCaseList=a.data;case 6:case"end":return r.stop()}}),r)})))()},addCase:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.addCaseFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=6;break}return t.next=3,e.$common.post("/caseGroupAddCase",e.addCaseForm);case 3:a=t.sent,e.$message.success(a.msg),1e4==a.code&&(e.addCaseDialog=!1);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},getCaseList:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(""===e){r.next=6;break}return t.queryCaseListParams.query=e,r.next=4,t.$common.get("/getAllCase",t.queryCaseListParams);case 4:a=r.sent,t.caseList=a.data;case 6:case"end":return r.stop()}}),r)})))()},openAddCaseDialog:function(e){this.addCaseForm.groupId=e.id,this.queryCaseListParams.projectId=e.projectId,this.addCaseDialog=!0},addCaseOpenDialog:function(){this.getAllComponent(),this.addDialogVisible=!0},getCaseGroupListBySelect:function(){this.queryCaseGroupListParams.pageNum=1,this.queryCaseGroupListParams.pageSize=10,this.getAllCaseGroup()},getAllCaseGroup:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/getAllCaseGroup",{params:e.queryCaseGroupListParams});case 2:r=t.sent,a=r.data,1e4!=a.code?e.$message.error(a.msg):(e.caseGroupList=a.data,e.caseGroupTotal=a.total);case 5:case"end":return t.stop()}}),t)})))()},delCase:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.delCaseGroupParam.groupId=e.id,t.delCaseGroupParam.flag=e.del,r.next=4,t.$http.get("/delGroup",{params:t.delCaseGroupParam});case 4:a=r.sent,n=a.data,1e4!=n.code?t.$message.error("服务器开小差了，请稍后重试或者联系管理员！"):e.del?t.$message({type:"success",message:"该用例已恢复使用!"}):t.$message({type:"success",message:"该用例已停用!"}),t.getAllCaseGroup();case 8:case"end":return r.stop()}}),r)})))()},changeDel:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(console.log(e),e.del){r.next=6;break}return r.next=4,t.$confirm("是否停用该用例集?","提示",{confirmButtonText:"停用",cancelButtonText:"取消",type:"warning"}).then((function(){t.delCase(e)})).catch((function(){t.getAllCaseGroup(),t.$message({type:"info",message:"已取消停用"})}));case 4:r.next=8;break;case 6:return r.next=8,t.$confirm("是否恢复使用该用例集?","提示",{confirmButtonText:"恢复",cancelButtonText:"取消",type:"warning"}).then((function(){t.delCase(e)})).catch((function(){t.getAllCaseGroup(),t.$message({type:"info",message:"已取消恢复使用"})}));case 8:case"end":return r.stop()}}),r)})))()},handleSizeChange:function(e){this.queryCaseGroupListParams.pageSize=e,this.getCaseList()},handleCurrentChange:function(e){this.queryCaseGroupListParams.pageNum=e,this.getCaseList()},addCaseGroup:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.addCaseGroupFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=8;break}return t.next=3,e.$http.post("/addCaseGroup",e.addCaseGroupForm);case 3:a=t.sent,n=a.data,1e4==n.code?(e.$message.success(n.msg),e.addCaseGroupDialog=!1):(e.$message.error(n.msg),e.addCaseGroupDialog=!0),t.next=8;break;case 8:e.getAllCaseGroup();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},showDialogVisible:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.editDialogVisible=!0,r.next=3,t.$http.get("/getCaseById?id="+e.id);case 3:a=r.sent,n=a.data,1e4==n.code?t.editCaseForm=n.data:t.$message.error(n.msg);case 6:case"end":return r.stop()}}),r)})))()},editCase:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.editCaseFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=8;break}return t.next=3,e.$http.post("/editCase",e.editCaseForm);case 3:a=t.sent,n=a.data,1e4==n.code?(e.$message.success(n.msg),e.editDialogVisible=!1,e.getCaseList()):e.$message.error(n.msg),t.next=8;break;case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},closeAdd:function(){this.$refs.addCaseGroupFormRef.resetFields()},closeAddCase:function(){this.$refs.addCaseFormRef.resetFields(),this.getAllCaseGroup()},closeEdit:function(){this.$refs.editCaseGroupFormRef.resetFields()},closeChange:function(){this.getAllCaseGroup()},getProject:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/getAllProject");case 2:r=t.sent,a=r.data,e.projectOptions=a.data;case 5:case"end":return t.stop()}}),t)})))()},runCaseById:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.loading=!0,r.next=3,t.$http.get("/runCaseById?id="+e);case 3:a=r.sent,n=a.data,t.loading=!1,1e4==n.code?t.$message.success(n.msg):t.$message.error(n.msg);case 7:case"end":return r.stop()}}),r)})))()},getExecuteRecoding:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$router.push("/case/executeRecoding/"+e);case 1:case"end":return r.stop()}}),r)})))()},openEditDialog:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$common.get("/getCaseGroupInfoById?id="+e);case 2:a=r.sent,t.editCaseGroupForm=a.data,t.editCaseGroupDialog=!0;case 5:case"end":return r.stop()}}),r)})))()},editCaseGroup:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.editCaseGroupFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=9;break}return t.next=3,e.$common.post("/editCaseGroupInfoById",e.editCaseGroupForm);case 3:a=t.sent,e.$message.success(a.msg),e.editCaseGroupDialog=!1,e.getAllCaseGroup(),t.next=10;break;case 9:console.log(表单格式错误);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()}},created:function(){null!=window.sessionStorage.getItem("projectId")&&null!=window.sessionStorage.getItem("projectName")&&(this.$global.currentProjectId=window.sessionStorage.getItem("projectId"),this.$global.currentProjectName=window.sessionStorage.getItem("projectName"),this.queryCaseGroupListParams.projectId=this.$global.currentProjectId,this.addCaseGroupForm.projectId=this.$global.currentProjectId),this.getAllCaseGroup(),this.getProject()}}),z=E,V=(r("172a"),Object(l["a"])(z,A,N,!1,null,"10c2179e",null)),B=V.exports,U=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._v(" 数据库配置组件 ")])},J=[],Q={},M=Q,H=Object(l["a"])(M,U,J,!1,null,"26554072",null),Y=H.exports,Z=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._v(" 单独项目，不知道写什么，先占个坑吧 ")])},W=[],K={},X=K,ee=Object(l["a"])(X,Z,W,!1,null,"265f34d8",null),te=ee.exports,re=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("用例管理")]),r("el-breadcrumb-item",[e._v("切换项目")])],1),r("el-card",[r("el-row",[r("el-col",{staticStyle:{"margin-top":"60px","margin-left":"4%","margin-right":"4%"},attrs:{span:4}},[r("div",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.delProject()}}},[r("el-card",{staticStyle:{"background-color":"#479DE3",height:"95px","border-radius":"15px"}},[r("div",{staticStyle:{"text-align":"center","font-size":"37.5px","font-color":"while"}},[r("span",[e._v("全平台")])])])],1)]),e._l(e.projectList,(function(t){return r("el-col",{key:t.id,staticStyle:{"margin-top":"60px","margin-left":"4%","margin-right":"4%"},attrs:{span:4}},[r("div",{staticStyle:{cursor:"pointer"},on:{click:function(r){return e.changeProject(t.id,t.name)}}},[r("el-card",{staticStyle:{"background-color":"#479DE3",height:"95px","border-radius":"15px"}},[r("div",{staticStyle:{"text-align":"center","font-size":"37.5px","font-color":"while"}},[r("span",[e._v(e._s(t.name))])])])],1)])}))],2)],1)],1)},ae=[],ne={data:function(){return{projectList:[]}},methods:{getAllProject:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$common.getAllProject();case 2:r=t.sent,e.projectList=r;case 4:case"end":return t.stop()}}),t)})))()},changeProject:function(e,t){this.$confirm("是否切换到 [ "+t+" ] ？ 切换之后只显示当前项目的相关内容 ！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){window.sessionStorage.setItem("projectId",e),window.sessionStorage.setItem("projectName",t),location.reload()})).catch((function(){}))},delProject:function(){this.$confirm("是否切换到 [ 全平台 ] ？ 切换之后显示全部内容 ！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){window.sessionStorage.removeItem("projectId"),window.sessionStorage.removeItem("projectName"),location.reload()})).catch((function(){}))}},created:function(){this.getAllProject()}},oe=ne,se=Object(l["a"])(oe,re,ae,!1,null,"7ee7e3cc",null),ie=se.exports,le=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._v(" 用例参数配置 ")])},ce=[],ue={},de=ue,pe=Object(l["a"])(de,le,ce,!1,null,"e9cb3b2a",null),me=pe.exports,ge=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("用例配置")]),r("el-breadcrumb-item",[e._v("组件配置")])],1),r("el-card",[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:3}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择组件分类"},model:{value:e.queryComponentListParams.categoryId,callback:function(t){e.$set(e.queryComponentListParams,"categoryId",t)},expression:"queryComponentListParams.categoryId"}},e._l(e.categorys,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),null==this.$global.currentProjectId&&null==this.$global.currentProjectName?r("el-col",{attrs:{span:3}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择所属项目"},model:{value:e.queryComponentListParams.projectId,callback:function(t){e.$set(e.queryComponentListParams,"projectId",t)},expression:"queryComponentListParams.projectId"}},e._l(e.projectOptions,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1):r("el-col",{attrs:{span:3}},[r("el-select",{attrs:{disabled:"",clearable:"",placeholder:"请选择所属项目"},model:{value:this.$global.currentProjectName,callback:function(t){e.$set(this.$global,"currentProjectName",t)},expression:"this.$global.currentProjectName"}},e._l(e.projectOptions,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-col",{attrs:{span:4}},[r("el-input",{attrs:{placeholder:"请输入组件名称",clearable:""},on:{clear:function(t){return e.getComponentListBySelect()}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getCaseList()}},model:{value:e.queryComponentListParams.query,callback:function(t){e.$set(e.queryComponentListParams,"query",t)},expression:"queryComponentListParams.query"}})],1),r("el-col",{attrs:{span:2}},[r("el-button",{attrs:{icon:"el-icon-search"},on:{click:function(t){return e.getComponentListBySelect()}}})],1),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addComponentGo()}}},[e._v("添加组件")])],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.componentList,border:""}},[r("el-table-column",{attrs:{fixed:"",type:"index",label:"#",width:"50px"}}),r("el-table-column",{attrs:{prop:"name",label:"组件名称",width:"200"}}),r("el-table-column",{attrs:{prop:"projectName",label:"所属项目",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{type:"warning"}},[e._v(e._s(t.row.projectName))])]}}])}),r("el-table-column",{attrs:{prop:"categoryName",label:"组件类别",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{type:"danger"}},[e._v(e._s(t.row.categoryName))])]}}])}),r("el-table-column",{attrs:{prop:"componentDescribe",label:"组件描述",width:"570"}}),r("el-table-column",{attrs:{fixed:"right",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.del?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"停用该组件",placement:"top",enterable:!1}},[r("el-switch",{on:{change:function(r){return e.changeDel(t.row)}},model:{value:t.row.del,callback:function(r){e.$set(t.row,"del",r)},expression:"scope.row.del"}})],1):r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"继续使用该组件",placement:"top",enterable:!1}},[r("el-switch",{on:{change:function(r){return e.changeDel(t.row)}},model:{value:t.row.del,callback:function(r){e.$set(t.row,"del",r)},expression:"scope.row.del"}})],1)]}}])}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit-outline",size:"mini"},on:{click:function(r){return e.toEditComponent(t.row.id)}}},[e._v("编辑组件")]),r("el-button",{attrs:{type:"primary",icon:"el-icon-video-play",size:"mini"},on:{click:function(r){return e.toComponentInfo(t.row.id)}}},[e._v("查看组件详情")])]}}])})],1),r("el-pagination",{attrs:{"current-page":e.queryComponentListParams.pageNum,"page-sizes":[10,15,20,50],"page-size":e.queryComponentListParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.componentTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-drawer",{attrs:{title:"选择添加组件类别",visible:e.drawer,"with-header":!1},on:{"update:visible":function(t){e.drawer=t}}},[r("div",{staticStyle:{"margin-top":"50px","text-align":"center"}},[r("span",{staticStyle:{"font-size":"25px"}},[e._v("选择添加组件类别")]),r("br"),e._l(e.componentCatrgoryList,(function(t){return r("div",{key:t.id,staticStyle:{"margin-top":"25px","marign-left":"50px","marign-right":"50px"}},[r("el-button",{staticStyle:{"margin-top":"10px"},attrs:{size:"medium",round:"",type:"primary"},on:{click:function(r){return e.toAddComponentByUrl(t.addComponentUrl)}}},[e._v(e._s(t.name))]),r("br"),r("br"),r("div",{staticStyle:{"text-align":"left","margin-left":"100px","margin-right":"100px"}},[r("strong",[e._v("使用说明")]),e._v("："+e._s(t.componentCategoryDesc))])],1)}))],2)])],1)},fe=[],he={data:function(){return{textareaHigh:5,protocolsOptions:[],projectOptions:[],queryComponentListParams:{query:"",pageNum:1,pageSize:10,projectId:"",categoryId:""},delComponentParam:{id:0,del:!0},componentList:[],componentTotal:0,drawer:!1,componentCatrgoryList:"",categorys:[]}},methods:{toAddComponentByUrl:function(e){this.drawer=!1,this.$router.push(e)},toComponentInfo:function(){},toEditComponent:function(e){},addComponentGo:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.drawer=!0,t.next=3,e.$http.get("getAllComponentCategory");case 3:r=t.sent,a=r.data,e.componentCatrgoryList=a.data;case 6:case"end":return t.stop()}}),t)})))()},getComponentCategory:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/getAllComponentCategory");case 2:r=t.sent,a=r.data,e.getProject(),e.categorys=a.data;case 6:case"end":return t.stop()}}),t)})))()},getComponentList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/getComponentList",{params:e.queryComponentListParams});case 2:r=t.sent,a=r.data,1e4==a.code?(e.componentList=a.data,e.componentTotal=a.total):e.$message.error(a.msg);case 5:case"end":return t.stop()}}),t)})))()},getComponentListBySelect:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.queryComponentListParams.pageNum=1,e.queryComponentListParams.pageSize=10,e.getComponentList();case 3:case"end":return t.stop()}}),t)})))()},delComponent:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.delComponentParam.id=e.id,t.delComponentParam.del=e.del,r.next=4,t.$http.get("/toDelComponent",{params:t.delComponentParam});case 4:a=r.sent,n=a.data,1e4!=n.code&&t.$message.error("服务器开小差了，请稍后重试或者联系管理员！"),e.del?t.$message({type:"success",message:"该组件已恢复使用!"}):t.$message({type:"success",message:"该组件已停用!"}),t.getComponentListBySelect();case 9:case"end":return r.stop()}}),r)})))()},changeDel:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.del){r.next=5;break}return r.next=3,t.$confirm("是否停用该组件?","提示",{confirmButtonText:"停用",cancelButtonText:"取消",type:"warning"}).then((function(){t.delComponent(e)})).catch((function(){e.del=!0,t.$message({type:"info",message:"已取消停用"})}));case 3:r.next=7;break;case 5:return r.next=7,t.$confirm("是否恢复使用该组件?","提示",{confirmButtonText:"恢复",cancelButtonText:"取消",type:"warning"}).then((function(){t.delComponent(e)})).catch((function(){e.del=!1,t.$message({type:"info",message:"已取消恢复使用"})}));case 7:case"end":return r.stop()}}),r)})))()},handleSizeChange:function(e){this.queryComponentListParams.pageSize=e,this.getComponentList()},handleCurrentChange:function(e){this.queryComponentListParams.pageNum=e,this.getComponentList()},getProject:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/getAllProject");case 2:r=t.sent,a=r.data,e.projectOptions=a.data;case 5:case"end":return t.stop()}}),t)})))()},getExecuteRecoding:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$router.push("/case/executeRecoding/"+e);case 1:case"end":return r.stop()}}),r)})))()}},created:function(){null!=window.sessionStorage.getItem("projectId")&&null!=window.sessionStorage.getItem("projectName")&&(this.$global.currentProjectId=window.sessionStorage.getItem("projectId"),this.$global.currentProjectName=window.sessionStorage.getItem("projectName"),this.queryComponentListParams.projectId=this.$global.currentProjectId),this.getComponentList(),this.getComponentCategory()}},be=he,we=Object(l["a"])(be,ge,fe,!1,null,"53e70805",null),ve=we.exports,ye=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"正在努力调用接口..."}},[r("el-breadcrumb",[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("用例配置")]),r("el-breadcrumb-item",[e._v("数据源配置")])],1),r("el-card",[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:3}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择DB类型"},on:{clear:function(t){return e.getDataSourceBySelect()}},model:{value:e.queryDataSourceListParams.dbType,callback:function(t){e.$set(e.queryDataSourceListParams,"dbType",t)},expression:"queryDataSourceListParams.dbType"}},e._l(e.dbTypes,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),null==this.$global.currentProjectId&&null==this.$global.currentProjectName?r("el-col",{attrs:{span:3}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择所属项目"},on:{clear:function(t){return e.getDataSourceBySelect()}},model:{value:e.queryDataSourceListParams.projectId,callback:function(t){e.$set(e.queryDataSourceListParams,"projectId",t)},expression:"queryDataSourceListParams.projectId"}},e._l(e.projectOptions,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1):r("el-col",{attrs:{span:3}},[r("el-select",{attrs:{disabled:"",clearable:"",placeholder:"请选择所属项目"},on:{clear:function(t){return e.getDataSourceBySelect()}},model:{value:this.$global.currentProjectName,callback:function(t){e.$set(this.$global,"currentProjectName",t)},expression:"this.$global.currentProjectName"}},e._l(e.projectOptions,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-col",{attrs:{span:4}},[r("el-input",{attrs:{placeholder:"请输入组件名称",clearable:""},on:{clear:function(t){return e.getDataSourceBySelect()}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getCaseList()}},model:{value:e.queryDataSourceListParams.query,callback:function(t){e.$set(e.queryDataSourceListParams,"query",t)},expression:"queryDataSourceListParams.query"}})],1),r("el-col",{attrs:{span:2}},[r("el-button",{attrs:{icon:"el-icon-search"},on:{click:function(t){return e.getDataSourceBySelect()}}})],1),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addDataSourceOpenDialog()}}},[e._v("添加数据源配置")])],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dataSourceConfigList,border:"",height:"670"}},[r("el-table-column",{attrs:{fixed:"",type:"index",label:"#",width:"50px"}}),r("el-table-column",{attrs:{prop:"name",label:"数据源名称",width:"200"}}),r("el-table-column",{attrs:{prop:"projectId",label:"所属项目",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.projectId?r("el-tag",{attrs:{type:"warning"}},[e._v("订单项目")]):e._e(),2==t.row.projectId?r("el-tag",{attrs:{type:"warning"}},[e._v("商品项目")]):e._e()]}}])}),r("el-table-column",{attrs:{prop:"dbtype",label:"DB类型",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.dbType?r("el-tag",{attrs:{type:"success"}},[e._v("MYSQL")]):e._e(),2==t.row.dbType?r("el-tag",{attrs:{type:"success"}},[e._v("ORACLE")]):e._e(),3==t.row.dbType?r("el-tag",{attrs:{type:"success"}},[e._v("SQL SERVER")]):e._e()]}}])}),r("el-table-column",{attrs:{prop:"url",label:"请求url"}})],1),r("el-pagination",{attrs:{"current-page":e.queryDataSourceListParams.pageNum,"page-sizes":[5,10,20,50],"page-size":e.queryDataSourceListParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.dataSourceTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-dialog",{attrs:{"close-on-click-modal":!1,title:"数据源配置添加",visible:e.addDataSourceDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addDataSourceDialogVisible=t},close:function(t){return e.closeAddFirst()}}},[r("span"),r("el-form",{ref:"addDataSourceFormRef",attrs:{rules:e.addDataSourceFormRules,model:e.addDataSourceForm,"label-width":"100px"}},[r("el-form-item",{staticClass:"input-center",staticStyle:{"margin-left":"150px","margin-right":"150px"},attrs:{label:"数据源名称",prop:"name"}},[r("el-input",{staticStyle:{width:"93%"},attrs:{"prefix-icon":"el-icon-edit",placeholder:"请输入数据源名称"},model:{value:e.addDataSourceForm.name,callback:function(t){e.$set(e.addDataSourceForm,"name",t)},expression:"addDataSourceForm.name"}})],1),r("el-form-item",{staticClass:"input-center",staticStyle:{"margin-left":"150px","margin-right":"150px"},attrs:{label:"DB类型",prop:"dbType"}},[r("el-select",{staticStyle:{width:"93%"},attrs:{placeholder:"请选择类型"},model:{value:e.addDataSourceForm.dbType,callback:function(t){e.$set(e.addDataSourceForm,"dbType",t)},expression:"addDataSourceForm.dbType"}},e._l(e.dbTypes,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),null==this.$global.currentProjectId&&null==this.$global.currentProjectName?r("el-form-item",{staticClass:"input-center",staticStyle:{"margin-left":"150px","margin-right":"150px"},attrs:{label:"所属项目",prop:"projectId"}},[r("el-select",{staticStyle:{width:"93%"},attrs:{placeholder:"请选择所属项目"},model:{value:e.addDataSourceForm.projectId,callback:function(t){e.$set(e.addDataSourceForm,"projectId",t)},expression:"addDataSourceForm.projectId"}},e._l(e.projectOptions,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1):r("el-form-item",{staticClass:"input-center",staticStyle:{"margin-left":"150px","margin-right":"150px"},attrs:{label:"所属项目",prop:"projectId"}},[r("el-select",{staticStyle:{width:"93%"},attrs:{disabled:"",placeholder:"请选择所属项目"},model:{value:this.$global.currentProjectName,callback:function(t){e.$set(this.$global,"currentProjectName",t)},expression:"this.$global.currentProjectName"}},e._l(e.projectOptions,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{staticStyle:{"margin-left":"150px","margin-right":"150px"},attrs:{label:"DB连接地址",prop:"url"}},[r("el-input",{staticStyle:{width:"93%"},attrs:{type:"textarea",rows:5,"prefix-icon":"el-icon-key",placeholder:"请输入DB连接地址"},model:{value:e.addDataSourceForm.url,callback:function(t){e.$set(e.addDataSourceForm,"url",t)},expression:"addDataSourceForm.url"}})],1),r("el-form-item",{staticStyle:{"margin-left":"150px","margin-right":"150px"},attrs:{label:"连接用户名",prop:"user"}},[r("el-input",{staticStyle:{width:"93%"},attrs:{"prefix-icon":"el-icon-key",placeholder:"请输入连接用户名"},model:{value:e.addDataSourceForm.user,callback:function(t){e.$set(e.addDataSourceForm,"user",t)},expression:"addDataSourceForm.user"}})],1),r("el-form-item",{staticStyle:{"margin-left":"150px","margin-right":"150px"},attrs:{label:"用户密码",prop:"password"}},[r("el-input",{staticStyle:{width:"93%"},attrs:{type:"password","prefix-icon":"el-icon-key",placeholder:"请输入用户密码"},model:{value:e.addDataSourceForm.password,callback:function(t){e.$set(e.addDataSourceForm,"password",t)},expression:"addDataSourceForm.password"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addDataSourceDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addDataSource()}}},[e._v("确 定")])],1)],1)],1)},xe=[],Ce=r("53ca"),ke={data:function(){return{textareaHigh:5,protocolsOptions:[],projectOptions:[],queryDataSourceListParams:{query:"",pageNum:1,pageSize:5,projectId:"",dbType:""},dbTypes:[{id:1,name:"MYSQL"},{id:2,name:"ORACLE"},{id:3,name:"SQL SERVER"}],delComponentParam:{id:0,del:!0},dataSourceConfigList:[],caseCount:0,addDataSourceDialogVisible:!1,addDataSourceForm:{name:"",dbType:"",url:"",user:"",password:"",projectId:""},dataSourceTotal:0,editCaseForm:{},addDataSourceFormRules:{name:[{required:!0,message:"请输入您的数据源名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],dbType:[{required:!0,message:"请选择DB类型",trigger:"blur"}],url:[{required:!0,message:"请输入连接地址",trigger:"blur"}],username:[{required:!0,message:"请输入连接用户名",trigger:"blur"}],password:[{required:!0,message:"请输入用户名密码",trigger:"blur"}],projectId:[{required:!0,message:"请选择所属项目",trigger:"blur"}]},lookHeaderAndResponseRules:{getTokenWay:[{required:!0,message:"请选择获取Token的方式",trigger:"blur"}]},editFormRules:{},middleFirstFrom:{},editDialogVisible:!1,categorys:[],lookHeaderAndResponseDialog:!1,lookHeaderAndResponseForm:{},tokenAssertWay:{},loading:!1}},methods:{addDataSourceOpenDialog:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getProject(),e.addDataSourceDialogVisible=!0;case 2:case"end":return t.stop()}}),t)})))()},addDataSource:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.addDataSourceFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=6;break}return t.next=3,e.$http.post("/addDataSource",e.addDataSourceForm);case 3:a=t.sent,n=a.data,1e4==n.code?(e.addDataSourceDialogVisible=!1,e.$message.success(n.msg),e.getDataSourceList()):e.$message.error(n.msg);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},getDataSourceList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/getDataSourceConfig",{params:e.queryDataSourceListParams});case 2:r=t.sent,a=r.data,1e4==a.code?(e.dataSourceConfigList=a.data,e.dataSourceTotal=a.total):e.$message.error(a.msg);case 5:case"end":return t.stop()}}),t)})))()},isJSON:function(e){if("string"==typeof e){try{var t=JSON.parse(e);return!("object"!=Object(Ce["a"])(t)||!t)}catch(r){return console.log("error："+e+"!!!"+r),!1}return!0}},getDataSourceBySelect:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.queryDataSourceListParams.pageNum=1,e.queryDataSourceListParams.pageSize=5,e.getDataSourceList();case 3:case"end":return t.stop()}}),t)})))()},delComponent:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.delComponentParam.id=e.id,t.delComponentParam.del=e.del,r.next=4,t.$http.get("/toDeComponent",{params:t.delComponentParam});case 4:a=r.sent,n=a.data,1e4!=n.code&&t.$message.error("服务器开小差了，请稍后重试或者联系管理员！"),e.del?t.$message({type:"success",message:"该组件已恢复使用!"}):t.$message({type:"success",message:"该组件已停用!"}),t.getDataSourceBySelect();case 9:case"end":return r.stop()}}),r)})))()},changeDel:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.del){r.next=5;break}return r.next=3,t.$confirm("是否停用该组件?","提示",{confirmButtonText:"停用",cancelButtonText:"取消",type:"warning"}).then((function(){t.delComponent(e)})).catch((function(){e.del=!0,t.$message({type:"info",message:"已取消停用"})}));case 3:r.next=7;break;case 5:return r.next=7,t.$confirm("是否恢复使用该组件?","提示",{confirmButtonText:"恢复",cancelButtonText:"取消",type:"warning"}).then((function(){t.delComponent(e)})).catch((function(){e.del=!1,t.$message({type:"info",message:"已取消恢复使用"})}));case 7:case"end":return r.stop()}}),r)})))()},handleSizeChange:function(e){this.queryDataSourceListParams.pageSize=e,this.getDataSourceList()},handleCurrentChange:function(e){this.queryDataSourceListParams.pageNum=e,this.getDataSourceList()},closeAddFirst:function(){this.$refs.addDataSourceFormRef.resetFields()},closeAddSecond:function(){this.textareaHigh=4},addCase:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:1==e.addCaseForm.protocolId&&(e.addCaseForm.getParams=""),e.$refs.addCaseFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=8;break}return t.next=3,e.$http.post("/addCase",e.addCaseForm);case 3:a=t.sent,n=a.data,1e4==n.code?(e.$message.success(n.msg),e.addDialogVisible=!1):(e.$message.error(n.msg),e.addDialogVisible=!0),t.next=8;break;case 8:e.getCaseList();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})))()},showDialogVisible:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.editDialogVisible=!0,r.next=3,t.$http.get("/getCaseById?id="+e.id);case 3:a=r.sent,n=a.data,1e4==n.code?t.editCaseForm=n.data:t.$message.error(n.msg);case 6:case"end":return r.stop()}}),r)})))()},editCase:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.editCaseFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=8;break}return t.next=3,e.$http.post("/editCase",e.editCaseForm);case 3:a=t.sent,n=a.data,1e4==n.code?(e.$message.success(n.msg),e.editDialogVisible=!1,e.getCaseList()):e.$message.error(n.msg),t.next=8;break;case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},closeEdit:function(){this.$refs.editCaseFormRef.resetFields(),this.textareaHigh=4},getProject:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/getAllProject");case 2:r=t.sent,a=r.data,e.projectOptions=a.data;case 5:case"end":return t.stop()}}),t)})))()},runCaseById:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.loading=!0,r.next=3,t.$http.get("/runCaseById?id="+e);case 3:a=r.sent,n=a.data,t.loading=!1,1e4==n.code?t.$message.success(n.msg):t.$message.error(n.msg);case 7:case"end":return r.stop()}}),r)})))()},getExecuteRecoding:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$router.push("/case/executeRecoding/"+e);case 1:case"end":return r.stop()}}),r)})))()}},created:function(){null!=window.sessionStorage.getItem("projectId")&&null!=window.sessionStorage.getItem("projectName")&&(this.$global.currentProjectId=window.sessionStorage.getItem("projectId"),this.$global.currentProjectName=window.sessionStorage.getItem("projectName"),this.addDataSourceForm.projectId=this.$global.currentProjectId,this.queryDataSourceListParams.projectId=this.$global.currentProjectId),this.getProject(),this.getDataSourceList()}},Se=ke,je=Object(l["a"])(Se,ye,xe,!1,null,"c802ea12",null),$e=je.exports,Re=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("任务中心")]),r("el-breadcrumb-item",[e._v("定时任务")])],1),r("el-card",[r("el-row",{attrs:{gutter:10}},[null==this.$global.currentProjectId&&null==this.$global.currentProjectName?r("el-col",{attrs:{span:3}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择所属项目"},model:{value:e.queryJobCaseGroupListParams.projectId,callback:function(t){e.$set(e.queryJobCaseGroupListParams,"projectId",t)},expression:"queryJobCaseGroupListParams.projectId"}},e._l(e.projectOptions,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1):r("el-col",{attrs:{span:3}},[r("el-select",{attrs:{disabled:"",clearable:"",placeholder:"请选择所属项目"},model:{value:this.$global.currentProjectName,callback:function(t){e.$set(this.$global,"currentProjectName",t)},expression:"this.$global.currentProjectName"}},e._l(e.projectOptions,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-col",{attrs:{span:4}},[r("el-input",{attrs:{placeholder:"请输入用例集名称",clearable:""},on:{clear:function(t){return e.getJobCaseGroupListBySelect()}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getJobCaseGroupListBySelect()}},model:{value:e.queryJobCaseGroupListParams.query,callback:function(t){e.$set(e.queryJobCaseGroupListParams,"query",t)},expression:"queryJobCaseGroupListParams.query"}})],1),r("el-col",{attrs:{span:5}},[r("el-button",{attrs:{icon:"el-icon-search"},on:{click:function(t){return e.getJobCaseGroupListBySelect()}}})],1),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:10}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addJobDialog=!0}}},[e._v("添加用例集")])],1),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:1}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.runJob()}}},[e._v("运行Job")])],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.jobCaseGroupList,border:""}},[r("el-table-column",{attrs:{fixed:"",type:"index",label:"#",width:"40px"}}),r("el-table-column",{attrs:{prop:"name",label:"用例集名称",width:"250"}}),r("el-table-column",{attrs:{prop:"projectName",label:"所属项目",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{type:"warning"}},[e._v(e._s(t.row.projectName))])]}}])}),r("el-table-column",{attrs:{prop:"caseGroupDescribe",label:"用例集描述",width:"750"}}),r("el-table-column",{attrs:{fixed:"right",label:"状态",width:"75"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.del?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"从Job中移除该用例集",placement:"top",enterable:!1}},[r("el-switch",{on:{change:function(r){return e.changeDel(t.row)}},model:{value:t.row.del,callback:function(r){e.$set(t.row,"del",r)},expression:"scope.row.del"}})],1):e._e()]}}])}),r("el-table-column",{attrs:{fixed:"right",label:"最后一次执行结果",width:"300"}},[r("span",{staticStyle:{"margin-right":"20px"}},[e._v("执行通过")]),r("el-button",{attrs:{type:"success",icon:"el-icon-check",plain:""}})],1)],1),r("el-pagination",{attrs:{"current-page":e.queryJobCaseGroupListParams.pageNum,"page-sizes":[10,15,20,50],"page-size":e.queryJobCaseGroupListParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.JobCaseGroupTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-dialog",{attrs:{title:"将用例集添加至定时任务中",visible:e.addJobDialog,width:"30%","before-close":e.colseAdd},on:{"update:visible":function(t){e.addJobDialog=t}}},[r("el-form",{ref:"addJobFormRef",attrs:{rules:e.addJobFormRules,model:e.addJobForm,"label-width":"100px"}},[r("el-row",[r("el-col",{attrs:{span:24}},[r("div",{staticClass:"grid-content bg-purple"},[r("el-form-item",{staticStyle:{"margin-left":"50px"},attrs:{label:"选择用例集",prop:"id"}},[r("el-select",{staticStyle:{width:"80%"},attrs:{filterable:"",remote:"","remote-method":e.getCaseGroupList,placeholder:"输入用例集名称进行模糊匹配"},model:{value:e.addJobForm.id,callback:function(t){e.$set(e.addJobForm,"id",t)},expression:"addJobForm.id"}},e._l(e.caseGroupList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)])],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addJobDialog=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addCaseGroupToJob()}}},[e._v("确 定")])],1)],1)],1)},_e=[],Ie={data:function(){return{textareaHigh:5,protocolsOptions:[],projectOptions:[],queryJobCaseGroupListParams:{query:"",pageNum:1,pageSize:10,projectId:this.$global.currentProjectId},jobCaseGroupList:[],JobCaseGroupTotal:0,componentCatrgoryList:"",categorys:[],addJobDialog:!1,addJobForm:{},caseGroupList:{},addJobFormRules:{id:[{required:!0,message:"请选择用例集",trigger:"blur"}]},queryCaseGroupForm:{query:"",pageNum:1,pageSize:100,projectId:this.$global.currentProjectId}}},methods:{runJob:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$message.success("已手动运行job，请稍后查看邮件。。。"),t.next=3,e.$common.get("/runJob");case 3:t.sent;case 4:case"end":return t.stop()}}),t)})))()},addCaseGroupToJob:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.addJobFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=7;break}return t.next=3,e.$common.get("/addCaseGroupToJob?caseGroupId="+e.addJobForm.id);case 3:a=t.sent,1e4==a.code?e.$message.success(a.msg):e.$message.error(a.msg),e.addJobDialog=!1,e.getJobCaseGroupListBySelect();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},getCaseGroupList:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.queryCaseGroupForm.query=e,r.next=3,t.$common.get("/getAllCaseGroup",t.queryCaseGroupForm);case 3:a=r.sent,console.log(a),t.caseGroupList=a.data;case 6:case"end":return r.stop()}}),r)})))()},colseAdd:function(){this.addJobDialog=!1,this.$refs.addJobFormRef.resetFields(),this.caseGroupList={}},getJobCaseGroupListBySelect:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.queryJobCaseGroupListParams.pageNum=1,e.queryJobCaseGroupListParams.pageSize=10,e.getJobCaseGroupList();case 3:case"end":return t.stop()}}),t)})))()},delJobCaseGroup:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.get("/toDelCaseGroupFromJob?id="+e.id);case 2:a=r.sent,n=a.data,1e4!=n.code&&t.$message.error("服务器开小差了，请稍后重试或者联系管理员！"),t.getJobCaseGroupListBySelect();case 6:case"end":return r.stop()}}),r)})))()},changeDel:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("是否停用该组件?","提示",{confirmButtonText:"停用",cancelButtonText:"取消",type:"warning"}).then((function(){t.delJobCaseGroup(e)})).catch((function(){e.del=!0,t.$message({type:"info",message:"已取消停用"})}));case 2:case"end":return r.stop()}}),r)})))()},handleSizeChange:function(e){this.queryJobCaseGroupListParams.pageSize=e,this.getComponentList()},handleCurrentChange:function(e){this.queryJobCaseGroupListParams.pageNum=e,this.getComponentList()},getProject:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/getAllProject");case 2:r=t.sent,a=r.data,e.projectOptions=a.data;case 5:case"end":return t.stop()}}),t)})))()},getJobCaseGroupList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$common.get("/getJobCaseGroup",e.queryJobCaseGroupListParams);case 2:r=t.sent,console.log(r),e.jobCaseGroupList=r.data,e.JobCaseGroupTotal=r.total;case 6:case"end":return t.stop()}}),t)})))()}},created:function(){null!=window.sessionStorage.getItem("projectId")&&null!=window.sessionStorage.getItem("projectName")&&(this.$global.currentProjectId=window.sessionStorage.getItem("projectId"),this.$global.currentProjectName=window.sessionStorage.getItem("projectName"),this.queryJobCaseGroupListParams.projectId=this.$global.currentProjectId),this.getProject(),this.getJobCaseGroupList()}},Le=Ie,Fe=Object(l["a"])(Le,Re,_e,!1,null,"17843217",null),Pe=Fe.exports,De=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._v(" 任务报告 ")])},Oe=[],qe={},Ge=qe,Ae=Object(l["a"])(Ge,De,Oe,!1,null,"27dee13f",null),Ne=Ae.exports,Te=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("工具中心")]),r("el-breadcrumb-item",[e._v("圈外工具")])],1),r("el-card",[r("el-row",e._l(e.utilsList,(function(t){return r("el-col",{key:t.id,staticStyle:{"margin-top":"60px","margin-left":"4%","margin-right":"4%"},attrs:{span:2}},[r("div",{staticStyle:{cursor:"pointer"},on:{click:function(r){return e.openDialog(t.path)}}},[r("el-tooltip",{staticClass:"item",attrs:{content:t.utilsDescribe,placement:"top"}},[r("el-button",{attrs:{type:"primary"}},[e._v(e._s(t.utilsName))])],1)],1)])})),1),r("el-button",{on:{click:function(t){return e.test()}}},[e._v("test")])],1),r("el-dialog",{attrs:{title:"快速开课",visible:e.openLessonDialog,width:"90%","before-close":e.closeOpenLessonDialog,"close-on-click-modal":!1},on:{"update:visible":function(t){e.openLessonDialog=t}}},[r("span",[e._v("该操作只生成对应的课程包的排期的学籍，不会生成对应的订单号，如果需要其他，请走正式流程")]),r("br"),r("br"),r("br"),r("el-form",{ref:"openLessonInfoRef",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.openLessonInfo,rules:e.openLessonRules}},[r("el-form-item",{attrs:{label:"passport_id",prop:"passportId"}},[r("el-input",{attrs:{placeholder:"用户的passport_id"},model:{value:e.openLessonInfo.passportId,callback:function(t){e.$set(e.openLessonInfo,"passportId",t)},expression:"openLessonInfo.passportId"}})],1),r("el-form-item",{attrs:{label:"课程包",prop:"lessonPackageId"}},[r("el-select",{staticStyle:{width:"440px"},attrs:{border:"",filterable:"",placeholder:"请选择",clearable:""},on:{change:function(t){return e.selectLessonPackage()}},model:{value:e.openLessonInfo.lessonPackageId,callback:function(t){e.$set(e.openLessonInfo,"lessonPackageId",t)},expression:"openLessonInfo.lessonPackageId"}},e._l(e.lessonPackageList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name+" [code:"+e.code+"]",value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"排期",prop:"termScheduleId"}},[r("el-select",{staticStyle:{width:"360px"},attrs:{filterable:"",placeholder:"请选择",clearable:""},model:{value:e.openLessonInfo.termScheduleId,callback:function(t){e.$set(e.openLessonInfo,"termScheduleId",t)},expression:"openLessonInfo.termScheduleId"}},e._l(e.termScheduleList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.term+"期，排期状态："+e.termStatusDesc+"，[code:"+e.code+"]",value:e.id}})})),1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.closeOpenLessonDialog()}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.openLesson()}}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"课程初始化",visible:e.resetLessonDialog,width:"90%","before-close":e.closeResetLessonDialog,"close-on-click-modal":!1},on:{"update:visible":function(t){e.resetLessonDialog=t}}},[r("span",[e._v("此操作会重置学籍状态，并将所有的学习记录清空")]),r("br"),r("br"),r("br"),r("el-form",{ref:"resetLessonPassportIdRef",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.resetLessonInfo,rules:e.resetLessonRules}},[r("el-form-item",{attrs:{label:"passport_id",prop:"passportId"}},[r("el-input",{attrs:{placeholder:"用户的passport_id"},model:{value:e.resetLessonInfo.passportId,callback:function(t){e.$set(e.resetLessonInfo,"passportId",t)},expression:"resetLessonInfo.passportId"}})],1),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getUserLesson()}}},[e._v("搜 索")])],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.usesLessonInfo,border:""}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.row.lessonList,height:"500",border:""}},[r("el-table-column",{attrs:{prop:"name",label:"课程名称",width:"180"}}),r("el-table-column",{attrs:{prop:"lessonTypeName",label:"课程类型",width:"180"}}),r("el-table-column",{attrs:{prop:"lessonCode",label:"lessonCode"}}),r("el-table-column",{attrs:{prop:"finishRuleName",label:"完课规则"}}),r("el-table-column",{attrs:{prop:"lessonCode",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(r){return e.restLessonConfirm(t.row.termScheduleCode,a.row.lessonCode,a.row.name)}}},[e._v("重置")])]}}],null,!0)})],1)]}}])}),r("el-table-column",{attrs:{prop:"lessonPackageName",label:"课程包",width:"300"}}),r("el-table-column",{attrs:{prop:"term",label:"排期数",width:"100"}}),r("el-table-column",{attrs:{label:"操作"}},[e._v("点击左侧箭头可选择对该课程包下的课程进行重置（仅限此passport_id用户）")])],1)],1)],1)},Ee=[],ze={data:function(){return{projectList:[],utilsList:[],fenye:{pageSize:10,pageNum:1},openLessonDialog:!1,openLessonInfo:{passportId:"",lessonPackageId:"",termScheduleId:""},lessonPackageList:[],termScheduleList:[],UserLessonInfo:[],resetLessonDialog:!1,resetLessonInfo:{passportId:"",termScheduleCode:"",lessonCode:""},usesLessonInfo:[],openLessonRules:{passportId:[{required:!0,message:"请输入passportId",trigger:"blur"}],lessonPackageId:[{required:!0,message:"请选择课程包",trigger:"change"}],termScheduleId:[{required:!0,message:"请选择排期",trigger:"change"}]},resetLessonRules:{passportId:[{required:!0,message:"请输入passportId",trigger:"blur"}]}}},methods:{test:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$common.get("/userInfo/test");case 2:r=t.sent,console.log(r);case 4:case"end":return t.stop()}}),t)})))()},closeResetLessonDialog:function(){this.resetLessonDialog=!1,this.usesLessonInfo=[],this.$refs.resetLessonPassportIdRef.resetFields()},restLessonConfirm:function(e,t,r){var a=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a.$confirm("确定重置["+a.resetLessonInfo.passportId+"]的【"+r+"】课程么?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.restLesson(e,t)})).catch((function(){a.$message({type:"info",message:"已取消重置"})}));case 2:case"end":return n.stop()}}),n)})))()},restLesson:function(e,t){var r=this;return Object(g["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r.resetLessonInfo.termScheduleCode=e,r.resetLessonInfo.lessonCode=t,a.next=4,r.$common.get("/classMemberRegistration/resetLesson",r.resetLessonInfo);case 4:n=a.sent,1e4==n.code?r.$message.success(n.msg):r.$message.error(n.msg);case 6:case"end":return a.stop()}}),a)})))()},getAllUtils:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$common.get("/quanwaiUtils/getAllUtils",e.fenye);case 2:r=t.sent,1e4===r.code?e.utilsList=r.data:e.$message.error(r.msg);case 4:case"end":return t.stop()}}),t)})))()},openDialog:function(e){"openLesson"==e?this.goOpenLessonDialog():"resetLesson"==e?this.goResetLessonDialog():"syncAccessToken"==e&&this.goSyncAccessToken()},goOpenLessonDialog:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.openLessonDialog=!0,t.next=3,e.$common.get("/lessonPackage/getAllPackage");case 3:r=t.sent,e.lessonPackageList=r.data;case 5:case"end":return t.stop()}}),t)})))()},goResetLessonDialog:function(){this.resetLessonDialog=!0},getUserLesson:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$common.get("/classMemberRegistration/getUserLessonByPassportId?passportId="+e.resetLessonInfo.passportId);case 2:r=t.sent,e.usesLessonInfo=r.data;case 4:case"end":return t.stop()}}),t)})))()},closeOpenLessonDialog:function(){this.openLessonDialog=!1,this.$refs.openLessonInfoRef.resetFields()},selectLessonPackage:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$common.get("/termSchedule/getTermSchedule?lessonPackageId="+e.openLessonInfo.lessonPackageId);case 2:r=t.sent,e.termScheduleList=r.data;case 4:case"end":return t.stop()}}),t)})))()},openLesson:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.openLessonInfoRef.validate((function(t){if(!t)return!1;var r=e.$common.post("/classMemberRegistration/openLesson",e.openLessonInfo);1e4==r.code&&(e.closeOpenLessonDialog(),e.$message.success(r.msg))}));case 2:case"end":return t.stop()}}),t)})))()},clearDialog:function(){console.log("关闭")},goSyncAccessToken:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$confirm("同步线上的access_token到测试环境?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.syncAccessToken()})).catch((function(){e.$message({type:"info",message:"已取消同步"})}));case 2:case"end":return t.stop()}}),t)})))()},syncAccessToken:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$common.get("/accessToken/sync");case 2:r=t.sent,1e4==r.code?e.$message.success(r.msg):e.$message.error(r.msg);case 4:case"end":return t.stop()}}),t)})))()}},created:function(){this.getAllUtils()}},Ve=ze,Be=Object(l["a"])(Ve,Te,Ee,!1,null,"837ce3ca",null),Ue=Be.exports,Je=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("工具中心")]),r("el-breadcrumb-item",[e._v("通用工具")])],1),r("el-card",[r("el-row",e._l(e.privateUtilsList,(function(t){return r("el-col",{key:t.id,staticStyle:{"margin-top":"60px","margin-left":"4%","margin-right":"4%"},attrs:{span:4}},[r("div",{staticStyle:{cursor:"pointer"},on:{click:function(r){return e.openUtilsDialog(t.id)}}},[r("el-card",{staticStyle:{"background-color":"#479DE3",height:"95px","border-radius":"15px"}},[r("div",{staticStyle:{"text-align":"center","font-size":"20px","font-color":"while"}},[r("span",[e._v(e._s(t.utilsName))])])])],1)])})),1)],1)],1)},Qe=[],Me={data:function(){return{projectList:[],privateUtilsList:[]}},methods:{getAllUtils:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$common.get("/getAllUtils");case 2:r=t.sent,e.privateUtilsList=r.data,console.log(r);case 5:case"end":return t.stop()}}),t)})))()},getAllProject:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$common.getAllProject();case 2:r=t.sent,e.projectList=r;case 4:case"end":return t.stop()}}),t)})))()},openUtilsDialog:function(e){return Object(g["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}},created:function(){this.getAllProject(),this.getAllUtils()}},He=Me,Ye=Object(l["a"])(He,Je,Qe,!1,null,"31cd6abb",null),Ze=Ye.exports,We=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("系统管理")]),r("el-breadcrumb-item",[e._v("用户管理")])],1),r("el-card",[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:4}},[r("el-input",{attrs:{placeholder:"请输入用户名",clearable:""},on:{clear:function(t){return e.getUserList()}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getUserList()}},model:{value:e.queryUserListParams.query,callback:function(t){e.$set(e.queryUserListParams,"query",t)},expression:"queryUserListParams.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.getUserList()}},slot:"append"})],1)],1),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:20}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("添加用户")])],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userList,border:""}},[r("el-table-column",{attrs:{fixed:"",type:"index",label:"#",width:"50px"}}),r("el-table-column",{attrs:{prop:"username",label:"用户名",width:"150"}}),r("el-table-column",{attrs:{prop:"customerName",label:"昵称",width:"150"}}),r("el-table-column",{attrs:{prop:"mobile",label:"电话",width:"150"}}),r("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"200"}}),r("el-table-column",{attrs:{prop:"address",label:"地址",width:"300"}}),r("el-table-column",{attrs:{prop:"company",label:"所属公司",width:"300"}}),r("el-table-column",{attrs:{prop:"department",label:"部门",width:"200"}}),r("el-table-column",{attrs:{fixed:"right",label:"状态",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.del?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"停用该用户",placement:"top",enterable:!1}},[r("el-switch",{on:{change:function(r){return e.changeDel(t.row)}},model:{value:t.row.del,callback:function(r){e.$set(t.row,"del",r)},expression:"scope.row.del"}})],1):r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"恢复该用户",placement:"top",enterable:!1}},[r("el-switch",{on:{change:function(r){return e.changeDel(t.row)}},model:{value:t.row.del,callback:function(r){e.$set(t.row,"del",r)},expression:"scope.row.del"}})],1)]}}])}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit-outline",size:"mini"},on:{click:function(r){return e.showDialogVisible(t.row)}}},[e._v("编辑")]),r("el-button",{attrs:{type:"primary",icon:"el-icon-user",size:"mini"},on:{click:function(r){return e.getUserInfo(t.row.id)}}},[e._v("详情")])]}}])})],1),r("el-pagination",{attrs:{"current-page":e.queryUserListParams.pageNum,"page-sizes":[10,15,20,50],"page-size":e.queryUserListParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.userTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-dialog",{attrs:{"close-on-click-modal":!1,title:"用户添加",visible:e.addDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:function(t){return e.closeAdd()}}},[r("span"),r("el-form",{ref:"addFormRef",attrs:{rules:e.addFormRules,model:e.addForm,"label-width":"70px"}},[r("el-form-item",{staticClass:"input-center",staticStyle:{"margin-left":"150px","margin-right":"150px"},attrs:{label:"用户名",prop:"username"}},[r("el-input",{staticStyle:{width:"93%"},attrs:{"prefix-icon":"el-icon-user",placeholder:"请输入用户名（登录时使用）"},model:{value:e.addForm.username,callback:function(t){e.$set(e.addForm,"username",t)},expression:"addForm.username"}})],1),r("el-form-item",{staticClass:"input-center",staticStyle:{"margin-left":"150px","margin-right":"150px"},attrs:{label:"昵称",prop:"customerName"}},[r("el-input",{staticStyle:{width:"93%"},attrs:{"prefix-icon":"el-icon-user-solid",placeholder:"请输入昵称（仅为一个名字标识）"},model:{value:e.addForm.customerName,callback:function(t){e.$set(e.addForm,"customerName",t)},expression:"addForm.customerName"}})],1),r("el-form-item",{staticStyle:{"margin-left":"150px","margin-right":"150px"},attrs:{label:"密码",prop:"password"}},[r("el-input",{staticStyle:{width:"93%"},attrs:{type:"password","prefix-icon":"el-icon-key",placeholder:"请输入密码"},model:{value:e.addForm.password,callback:function(t){e.$set(e.addForm,"password",t)},expression:"addForm.password"}})],1),r("el-form-item",{staticStyle:{"margin-left":"150px","margin-right":"150px"},attrs:{label:"手机",prop:"mobile"}},[r("el-input",{staticStyle:{width:"93%"},attrs:{"prefix-icon":"el-icon-mobile-phone",placeholder:"请输入手机号"},model:{value:e.addForm.mobile,callback:function(t){e.$set(e.addForm,"mobile",t)},expression:"addForm.mobile"}})],1),r("el-form-item",{staticStyle:{"margin-left":"150px","margin-right":"150px"},attrs:{label:"邮箱",prop:"email"}},[r("el-input",{staticStyle:{width:"93%"},attrs:{"prefix-icon":"el-icon-message",placeholder:"请输入邮箱"},model:{value:e.addForm.email,callback:function(t){e.$set(e.addForm,"email",t)},expression:"addForm.email"}})],1),r("el-form-item",{staticStyle:{"margin-left":"150px","margin-right":"150px"},attrs:{label:"地址",prop:"address"}},[r("el-input",{staticStyle:{width:"93%"},attrs:{"prefix-icon":"el-icon-map-location",placeholder:"请输入地址"},model:{value:e.addForm.address,callback:function(t){e.$set(e.addForm,"address",t)},expression:"addForm.address"}})],1),r("el-form-item",{staticStyle:{"margin-left":"150px","margin-right":"150px"},attrs:{label:"公司",prop:"company"}},[r("el-input",{staticStyle:{width:"93%"},attrs:{"prefix-icon":"el-icon-office-building",placeholder:"请输入所在公司"},model:{value:e.addForm.company,callback:function(t){e.$set(e.addForm,"company",t)},expression:"addForm.company"}})],1),r("el-form-item",{staticStyle:{"margin-left":"150px","margin-right":"150px"},attrs:{label:"部门",prop:"department"}},[r("el-input",{staticStyle:{width:"93%"},attrs:{"prefix-icon":"el-icon-monitor",placeholder:"请输入所在部门"},model:{value:e.addForm.department,callback:function(t){e.$set(e.addForm,"department",t)},expression:"addForm.department"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addUser()}}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{"close-on-click-modal":!1,title:"用户编辑",visible:e.editDialogVisible,width:"50%"},on:{"update:visible":function(t){e.editDialogVisible=t},close:function(t){return e.closeEdit()}}},[r("span"),r("el-form",{ref:"editFormRef",attrs:{rules:e.addFormRules,model:e.editForm,"label-width":"70px"}},[r("el-form-item",{staticClass:"input-center",staticStyle:{"margin-left":"150px","margin-right":"150px"},attrs:{label:"用户名",prop:"username"}},[r("el-input",{staticStyle:{width:"93%"},attrs:{"prefix-icon":"el-icon-user",placeholder:"用户名禁止更改",disabled:""},model:{value:e.editForm.username,callback:function(t){e.$set(e.editForm,"username",t)},expression:"editForm.username"}})],1),r("el-form-item",{staticClass:"input-center",staticStyle:{"margin-left":"150px","margin-right":"150px"},attrs:{label:"昵称",prop:"customerName"}},[r("el-input",{staticStyle:{width:"93%"},attrs:{"prefix-icon":"el-icon-user-solid",placeholder:"请输入昵称（仅为一个名字标识）"},model:{value:e.editForm.customerName,callback:function(t){e.$set(e.editForm,"customerName",t)},expression:"editForm.customerName"}})],1),r("el-form-item",{staticStyle:{"margin-left":"150px","margin-right":"150px"},attrs:{label:"手机",prop:"mobile"}},[r("el-input",{staticStyle:{width:"93%"},attrs:{"prefix-icon":"el-icon-mobile-phone",placeholder:"请输入手机号"},model:{value:e.editForm.mobile,callback:function(t){e.$set(e.editForm,"mobile",t)},expression:"editForm.mobile"}})],1),r("el-form-item",{staticStyle:{"margin-left":"150px","margin-right":"150px"},attrs:{label:"邮箱",prop:"email"}},[r("el-input",{staticStyle:{width:"93%"},attrs:{"prefix-icon":"el-icon-message",placeholder:"请输入邮箱"},model:{value:e.editForm.email,callback:function(t){e.$set(e.editForm,"email",t)},expression:"editForm.email"}})],1),r("el-form-item",{staticStyle:{"margin-left":"150px","margin-right":"150px"},attrs:{label:"地址",prop:"address"}},[r("el-input",{staticStyle:{width:"93%"},attrs:{"prefix-icon":"el-icon-map-location",placeholder:"请输入地址"},model:{value:e.editForm.address,callback:function(t){e.$set(e.editForm,"address",t)},expression:"editForm.address"}})],1),r("el-form-item",{staticStyle:{"margin-left":"150px","margin-right":"150px"},attrs:{label:"公司",prop:"company"}},[r("el-input",{staticStyle:{width:"93%"},attrs:{"prefix-icon":"el-icon-office-building",placeholder:"请输入所在公司"},model:{value:e.editForm.company,callback:function(t){e.$set(e.editForm,"company",t)},expression:"editForm.company"}})],1),r("el-form-item",{staticStyle:{"margin-left":"150px","margin-right":"150px"},attrs:{label:"部门",prop:"department"}},[r("el-input",{staticStyle:{width:"93%"},attrs:{"prefix-icon":"el-icon-monitor",placeholder:"请输入所在部门"},model:{value:e.editForm.department,callback:function(t){e.$set(e.editForm,"department",t)},expression:"editForm.department"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editUser()}}},[e._v("确 定")])],1)],1),r("router-view")],1)},Ke=[],Xe={data:function(){var e=function(e,t,r){var a=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;if(a.test(t))return r();r(new Error("请输入合法的邮箱"))},t=function(e,t,r){var a=/^1([38][0-9]|4[579]|5[0-3,5-9]|6[6]|7[0135678]|9[89])\d{8}$/;if(a.test(t))return r();r(new Error("请输入正确的手机号"))};return{queryUserListParams:{query:"",pageNum:1,pageSize:10},delUserParam:{uid:0,flag:!0},userList:[],userTotal:0,addDialogVisible:!1,addForm:{id:0,username:"",password:"",mobile:"",email:"",address:"",company:"",department:"",customerName:""},editForm:{username:"",mobile:"",email:"",address:"",company:"",department:"",customerName:""},addFormRules:{username:[{required:!0,message:"请输入您的用户名",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入您的密码",trigger:"blur"},{min:4,max:20,message:"长度在 4 到 20 个字符",trigger:"blur"}],mobile:[{required:!0,message:"请输入您的手机号",trigger:"blur"},{validator:t,trigger:"blur"}],email:[{required:!0,message:"请输入您的邮箱地址",trigger:"blur"},{validator:e,trigger:"blur"}],address:[{min:2,max:100,message:"长度在 2 到 10 个字符",trigger:"blur"}],company:[{min:2,max:40,message:"长度在 2 到 40 个字符",trigger:"blur"}],department:[{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],customerName:[{required:!0,message:"请输入您的昵称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}]},editDialogVisible:!1}},methods:{getUserList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/queryUser",{params:e.queryUserListParams});case 2:r=t.sent,a=r.data,1e4!=a.code?e.$message.error(a.msg):(e.userList=a.data,e.userTotal=e.userList.length);case 5:case"end":return t.stop()}}),t)})))()},delUser:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.delUserParam.uid=e.id,t.delUserParam.flag=e.del,r.next=4,t.$http.get("/toDelUser",{params:t.delUserParam});case 4:a=r.sent,n=a.data,1e4!=n.code&&t.$message.error("服务器开小差了，请稍后重试或者联系管理员！"),e.del?t.$message({type:"success",message:"该账户已恢复使用!"}):t.$message({type:"success",message:"该账户已停用!"}),t.getUserList();case 9:case"end":return r.stop()}}),r)})))()},changeDel:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.del){r.next=5;break}return r.next=3,t.$confirm("是否停用该用户?","提示",{confirmButtonText:"停用",cancelButtonText:"取消",type:"warning"}).then((function(){t.delUser(e),console.log("删除了")})).catch((function(){t.getUserList(),t.$message({type:"info",message:"已取消停用"})}));case 3:r.next=7;break;case 5:return r.next=7,t.$confirm("是否恢复该用户?","提示",{confirmButtonText:"恢复",cancelButtonText:"取消",type:"warning"}).then((function(){t.delUser(e),console.log("删除了")})).catch((function(){t.getUserList(),t.$message({type:"info",message:"已取消恢复"})}));case 7:case"end":return r.stop()}}),r)})))()},handleSizeChange:function(e){this.queryUserListParams.pageSize=e,this.getUserList()},handleCurrentChange:function(e){this.queryUserListParams.pageNum=e,this.getUserList()},closeAdd:function(){this.$refs.addFormRef.resetFields()},addUser:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.addFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=8;break}return t.next=3,e.$http.post("/addUser",e.addForm);case 3:a=t.sent,n=a.data,1e4==n.code?(e.$message.success(n.msg),e.addDialogVisible=!1,e.getUserList()):e.$message.error(n.msg),t.next=8;break;case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},showDialogVisible:function(e){this.editForm=e,this.editDialogVisible=!0},editUser:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.editFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=8;break}return t.next=3,e.$http.post("/editUser",e.editForm);case 3:a=t.sent,n=a.data,1e4==n.code?(e.$message.success(n.msg),e.editDialogVisible=!1,e.getUserList()):e.$message.error(n.msg),t.next=8;break;case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},closeEdit:function(){this.$refs.editFormRef.resetFields()},getUserInfo:function(e){console.log("查看详情"),this.$alert("用户详情优化功能正在路上，敬请期待...","工程师开发中...",{confirmButtonText:"确定",callback:function(e){}})}},created:function(){this.getUserList()}},et=Xe,tt=Object(l["a"])(et,We,Ke,!1,null,"e3964528",null),rt=tt.exports,at=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("系统管理")]),r("el-breadcrumb-item",[e._v("权限管理")])],1),r("el-card",[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.noDo()}}},[e._v("添加权限")])],1)],1),r("el-table",{attrs:{data:e.permissionList,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"expand"}}),r("el-table-column",{attrs:{type:"index",label:"#",width:"40"}}),r("el-table-column",{attrs:{prop:"name",label:"权限名",width:"200"}}),r("el-table-column",{attrs:{prop:"url",label:"路径",width:"300"}}),r("el-table-column",{attrs:{prop:"leave",label:"等级",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.leave?r("el-tag",{attrs:{type:"danger"}},[e._v("等级一")]):e._e(),1==t.row.leave?r("el-tag",{attrs:{type:"warning"}},[e._v("等级二")]):e._e(),2==t.row.leave?r("el-tag",{attrs:{type:"success"}},[e._v("等级三")]):e._e()]}}])}),r("el-table-column",{attrs:{prop:"userGroup",label:"用户组",width:"200"}}),r("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.del?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"停用该权限",placement:"top",enterable:!1}},[r("el-switch",{on:{change:function(r){return e.changeDel(t.row)}},model:{value:t.row.del,callback:function(r){e.$set(t.row,"del",r)},expression:"scope.row.del"}})],1):r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"恢复该权限",placement:"top",enterable:!1}},[r("el-switch",{on:{change:function(r){return e.changeDel(t.row)}},model:{value:t.row.del,callback:function(r){e.$set(t.row,"del",r)},expression:"scope.row.del"}})],1)]}}])})],1),r("el-pagination",{attrs:{"current-page":e.queryPermissionListParams.pageNum,"page-sizes":[10,15,20,50],"page-size":e.queryPermissionListParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.permissionTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._m(0)],1)},nt=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v(" 后端功能开发中，当前页面仅供预览！！！ ")])])}],ot={data:function(){var e=function(e,t,r){var a=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;if(a.test(t))return r();r(new Error("请输入合法的邮箱"))},t=function(e,t,r){var a=/^1([38][0-9]|4[579]|5[0-3,5-9]|6[6]|7[0135678]|9[89])\d{8}$/;if(a.test(t))return r();r(new Error("请输入正确的手机号"))};return{queryPermissionListParams:{query:"",pageNum:1,pageSize:10},delPermissionParam:{uid:0,flag:!0},permissionList:[{id:1,name:"权限名测试数据1",url:"test/test1",leave:0,userGroup:"测试用户组1",del:!0},{id:2,name:"权限名测试数据2",url:"test/test2",leave:1,userGroup:"测试用户组2",del:!0},{id:3,name:"权限名测试数据3",url:"test/test3",leave:2,userGroup:"测试用户组3",del:!0}],permissionTotal:1,addDialogVisible:!1,addForm:{id:0,username:"",password:"",mobile:"",email:"",address:"",company:"",department:"",customerName:""},editForm:{username:"",mobile:"",email:"",address:"",company:"",department:"",customerName:""},addFormRules:{username:[{required:!0,message:"请输入您的用户名",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入您的密码",trigger:"blur"},{min:4,max:20,message:"长度在 4 到 20 个字符",trigger:"blur"}],mobile:[{required:!0,message:"请输入您的手机号",trigger:"blur"},{validator:t,trigger:"blur"}],email:[{required:!0,message:"请输入您的手机号",trigger:"blur"},{validator:e,trigger:"blur"}],address:[{min:2,max:100,message:"长度在 2 到 10 个字符",trigger:"blur"}],company:[{min:2,max:40,message:"长度在 2 到 40 个字符",trigger:"blur"}],department:[{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],customerName:[{required:!0,message:"请输入您的昵称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}]},editDialogVisible:!1}},methods:{getPermissionList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/queryPermission",{params:e.queryPermissionListParams});case 2:r=t.sent,a=r.data,1e4!=a.code?e.$message.error("服务器开小差了，请稍后重试或者联系管理员！"):(e.userList=a.data,e.userTotal=a.total);case 5:case"end":return t.stop()}}),t)})))()},delUser:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.del?t.$message({type:"success",message:"该权限已恢复使用!"}):t.$message({type:"success",message:"该权限已停用!"});case 1:case"end":return r.stop()}}),r)})))()},changeDel:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.del){r.next=5;break}return r.next=3,t.$confirm("是否停用该权限?","提示",{confirmButtonText:"停用",cancelButtonText:"取消",type:"warning"}).then((function(){t.delUser(e),console.log("删除了")})).catch((function(){e.del=!e.del,t.$message({type:"info",message:"已取消停用"})}));case 3:r.next=7;break;case 5:return r.next=7,t.$confirm("是否恢复该用户?","提示",{confirmButtonText:"恢复",cancelButtonText:"取消",type:"warning"}).then((function(){t.delUser(e)})).catch((function(){e.del=!e.del,t.$message({type:"info",message:"已取消恢复"})}));case 7:case"end":return r.stop()}}),r)})))()},handleSizeChange:function(e){this.queryUserListParams.pageSize=e,this.getUserList()},handleCurrentChange:function(e){this.queryUserListParams.pageNum=e,this.getUserList()},closeAdd:function(){this.$refs.addFormRef.resetFields()},addUser:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.addFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=8;break}return t.next=3,e.$http.post("/addUser",e.addForm);case 3:a=t.sent,n=a.data,1e4==n.code?(e.$message.success(n.msg),e.addDialogVisible=!1,e.getUserList()):e.$message.error(n.msg),t.next=8;break;case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},showDialogVisible:function(e){this.editForm=e,this.editDialogVisible=!0},editUser:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.editFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=8;break}return t.next=3,e.$http.post("/editUser",e.editForm);case 3:a=t.sent,n=a.data,1e4==n.code?(e.$message.success(n.msg),e.editDialogVisible=!1,e.getUserList()):e.$message.error(n.msg),t.next=8;break;case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},closeEdit:function(){this.$refs.editFormRef.resetFields()},getUserInfo:function(e){console.log("查看详情"),this.$alert("用户详情优化功能正在路上，敬请期待...","工程师开发中...",{confirmButtonText:"确定",callback:function(e){}})},noDo:function(){this.$alert("用户权限功能正在路上，敬请期待...","工程师开发中...",{confirmButtonText:"确定",callback:function(e){}})}},created:function(){}},st=ot,it=Object(l["a"])(st,at,nt,!1,null,"69b79db8",null),lt=it.exports,ct=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._v(" 用户ID："+e._s(e.uid)+" ")])},ut=[],dt={props:["uid"]},pt=dt,mt=Object(l["a"])(pt,ct,ut,!1,null,"15b1f6aa",null),gt=mt.exports,ft=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("用例管理")]),r("el-breadcrumb-item",{attrs:{to:{path:"/case/single"}}},[e._v("单接口用例")]),r("el-breadcrumb-item",[e._v("用例执行记录")])],1),r("el-card",[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:1.5}},[r("el-button",{attrs:{icon:"el-icon-back",type:"primary"},on:{click:function(t){return e.black()}}},[e._v("返回")])],1),r("el-col",{attrs:{span:2}},[r("el-select",{attrs:{clearable:"",placeholder:"执行结果"},model:{value:e.queryExecuteRecoding.executeResult,callback:function(t){e.$set(e.queryExecuteRecoding,"executeResult",t)},expression:"queryExecuteRecoding.executeResult"}},e._l(e.executeResults,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-col",{attrs:{span:5.5}},[r("el-date-picker",{attrs:{"value-format":"timestamp","unlink-panels":"",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1),r("el-col",{attrs:{span:1}},[r("el-button",{attrs:{icon:"el-icon-search"},on:{click:function(t){return e.query()}}})],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.recoding,border:"",height:"670"}},[r("el-table-column",{attrs:{fixed:"",type:"index",label:"#",width:"50px"}}),r("el-table-column",{attrs:{prop:"name",label:"用例名称",width:"150"}}),r("el-table-column",{attrs:{prop:"time",label:"执行时间",width:"150"}}),r("el-table-column",{attrs:{prop:"executeResult",label:"执行结果",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.executeResult?r("el-tag",{attrs:{type:"success"}},[e._v("SUCCESS")]):e._e(),0==t.row.executeResult?r("el-tag",{attrs:{type:"danger"}},[e._v("FAIL")]):e._e()]}}])}),r("el-table-column",{attrs:{prop:"protocolId",label:"请求方式",width:"75"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.protocolId?r("el-tag",{attrs:{type:"success"}},[e._v("GET")]):e._e(),2==t.row.protocolId?r("el-tag",{attrs:{type:"danger"}},[e._v("POST")]):e._e()]}}])}),r("el-table-column",{attrs:{prop:"url",label:"请求URL",width:"200"}}),r("el-table-column",{attrs:{prop:"requestParams",label:"请求参数",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[2==t.row.protocolId&&1==t.row.paramsType?r("span",[e._v(e._s(t.row.requestParams))]):e._e(),1==t.row.protocolId?r("span",[e._v("无参数")]):e._e(),e._l(t.row.formParams,(function(t,a){return r("span",{key:a},[e._v("[ "+e._s(t.nameValue)+" : "+e._s(t.paramValue)+" ]"),r("br")])}))]}}])}),r("el-table-column",{attrs:{prop:"assertFlag",label:"断言标志",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.assertFlag.split("<==>"),(function(t,a){return r("span",{key:a},[e._v(e._s(t)),r("br")])}))}}])}),r("el-table-column",{attrs:{prop:"assertContent",label:"预期断言",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.assertContent.split("<==>"),(function(t,a){return r("span",{key:a},[e._v(e._s(t)),r("br")])}))}}])}),r("el-table-column",{attrs:{prop:"executeResponse",label:"接口响应",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(" "+e._s(t.row.executeResponse.length>100?t.row.executeResponse.substring(0,100)+"......":t.row.executeResponse)+" ")]),t.row.executeResponse.length>100?r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.queryExecuteResponse(t.row)}}},[e._v("查看更多")]):e._e()]}}])}),r("el-table-column",{attrs:{prop:"username",label:"执行人",width:"95"}})],1),r("el-dialog",{attrs:{title:"Response",visible:e.executeResponseDialog,width:"90%"},on:{"update:visible":function(t){e.executeResponseDialog=t}}},[r("el-input",{attrs:{type:"textarea",rows:"23"},model:{value:e.allExecuteResponse,callback:function(t){e.allExecuteResponse=t},expression:"allExecuteResponse"}}),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.executeResponseDialog=!1}}},[e._v("朕知道了")])],1)],1),r("el-pagination",{attrs:{"current-page":e.queryExecuteRecoding.pageNum,"page-sizes":[5,10,20,50],"page-size":e.queryExecuteRecoding.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:this.recodingTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},ht=[],bt={props:["cid"],data:function(){return{recoding:[],queryExecuteRecoding:{cid:0,pageNum:1,pageSize:10,startTime:"",endTime:""},recodingTotal:10,executeResult:-1,executeResults:[{value:1,label:"执行成功"},{value:0,label:"执行失败"}],time:[],executeResponseDialog:!1,allExecuteResponse:""}},methods:{black:function(){this.$router.push("/case/single")},handleSizeChange:function(e){this.queryExecuteRecoding.pageSize=e,this.getRecoding()},handleCurrentChange:function(e){this.queryExecuteRecoding.pageNum=e,this.getRecoding()},getRecoding:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.queryExecuteRecoding.cid=parseInt(e.cid),t.next=3,e.$http.get("/getExecuteRecoding",{params:e.queryExecuteRecoding});case 3:r=t.sent,a=r.data,e.recoding=a.data,e.recodingTotal=a.total;case 7:case"end":return t.stop()}}),t)})))()},query:function(){null!=this.time&&void 0!==this.time[0]?(this.queryExecuteRecoding.startTime=this.time[0],this.queryExecuteRecoding.endTime=this.time[1]):(this.queryExecuteRecoding.startTime="",this.queryExecuteRecoding.endTime=""),this.getRecoding()},queryExecuteResponse:function(e){this.allExecuteResponse=this.$common.formatJson(e.executeResponse),this.executeResponseDialog=!0}},created:function(){this.getRecoding()}},wt=bt,vt=Object(l["a"])(wt,ft,ht,!1,null,"a04f4a96",null),yt=vt.exports,xt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"正在请求中..."}},[r("el-breadcrumb",[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("用例管理")]),r("el-breadcrumb-item",{attrs:{to:{path:"/caseConfig/component"}}},[e._v("组件配置")]),r("el-breadcrumb-item",[e._v("添加DB查询组件")])],1),r("el-card",[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:1.5}},[r("el-button",{attrs:{icon:"el-icon-back",type:"primary"},on:{click:function(t){return e.back()}}},[e._v("返回")])],1)],1),r("el-form",{ref:"addComponentFormRef",attrs:{rules:e.addComponentFormRules,model:e.addComponentForm,"label-width":"100px"}},[r("el-form-item",{staticClass:"input-center",staticStyle:{"margin-left":"200px","margin-right":"200px"},attrs:{label:"组件名称",prop:"name"}},[r("el-input",{staticStyle:{width:"93%"},attrs:{"prefix-icon":"el-icon-edit",placeholder:"请输入组件名称"},model:{value:e.addComponentForm.name,callback:function(t){e.$set(e.addComponentForm,"name",t)},expression:"addComponentForm.name"}})],1),null==this.$global.currentProjectId&&null==this.$global.currentProjectName?r("el-form-item",{staticStyle:{"margin-left":"200px","margin-right":"200px"},attrs:{label:"所属项目",prop:"projectId"}},[r("el-select",{staticStyle:{width:"93%"},attrs:{placeholder:"请选择项目"},model:{value:e.addComponentForm.projectId,callback:function(t){e.$set(e.addComponentForm,"projectId",t)},expression:"addComponentForm.projectId"}},e._l(e.projectList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1):r("el-form-item",{staticStyle:{"margin-left":"200px","margin-right":"200px"},attrs:{label:"所属项目",prop:"projectId"}},[r("el-select",{staticStyle:{width:"93%"},attrs:{disabled:"",placeholder:"请选择项目"},model:{value:this.$global.currentProjectName,callback:function(t){e.$set(this.$global,"currentProjectName",t)},expression:"this.$global.currentProjectName"}},e._l(e.projectList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{staticStyle:{"margin-left":"200px","margin-right":"200px"},attrs:{label:"数据源",prop:"dataSourceId"}},[r("el-select",{staticStyle:{width:"93%"},attrs:{placeholder:"请选择数据源"},model:{value:e.addComponentForm.dataSourceId,callback:function(t){e.$set(e.addComponentForm,"dataSourceId",t)},expression:"addComponentForm.dataSourceId"}},e._l(e.dataSourceList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{staticStyle:{"margin-left":"200px","margin-right":"200px"},attrs:{label:"SQL语句",prop:"sqlContent"}},[r("el-input",{staticStyle:{width:"93%"},attrs:{type:"textarea",rows:5,"prefix-icon":"el-icon-key",placeholder:"请输入SQL语句，建议查询结果只有一条记录，即使有多条，断言只会取第一条记录"},model:{value:e.addComponentForm.sqlContent,callback:function(t){e.$set(e.addComponentForm,"sqlContent",t)},expression:"addComponentForm.sqlContent"}})],1),r("el-form-item",{staticStyle:{"margin-left":"200px","margin-right":"200px"},attrs:{label:"组件描述",prop:"componentDescribe"}},[r("el-input",{staticStyle:{width:"93%"},attrs:{type:"textarea",rows:5,"prefix-icon":"el-icon-key",placeholder:"请输入组件描述"},model:{value:e.addComponentForm.componentDescribe,callback:function(t){e.$set(e.addComponentForm,"componentDescribe",t)},expression:"addComponentForm.componentDescribe"}})],1),r("div",{staticStyle:{"text-align":"right","margin-right":"280px"}},[r("el-button",{staticStyle:{"text-align":"right"},attrs:{type:"primary"},on:{click:function(t){return e.getSQLDate()}}},[e._v("下一步")])],1)],1)],1),r("el-dialog",{attrs:{title:"SQL查询器查询结果",visible:e.SQLSelectDialogVisible,width:"90%"},on:{"update:visible":function(t){e.SQLSelectDialogVisible=t}}},[r("el-table",{staticStyle:{width:"100%"},attrs:{border:"",height:"600",data:e.valueList}},[r("el-table-column",{attrs:{fixed:"",type:"index",label:"#",width:"50px"}}),e._l(e.keyList,(function(e,t){return r("el-table-column",{key:t,attrs:{prop:e,label:e,width:"160"}})}))],2),r("p",{staticStyle:{color:"red","font-size":"20px"}},[e._v("选择要断言的字段和预期结果,数据结果集最多返回50条!")]),r("br"),r("el-form",{ref:"addSQLSelectComponentFormRef",attrs:{rules:e.addSQLSelectRules,"v-model":e.addSQLSelectForm}},[r("el-form-item",{attrs:{label:"SQL断言"}},[r("el-switch",{model:{value:e.switchInfo.isAssert,callback:function(t){e.$set(e.switchInfo,"isAssert",t)},expression:"switchInfo.isAssert"}}),e.switchInfo.isAssert?r("el-button",{staticStyle:{"margin-left":"50px"},attrs:{type:"primary"},on:{click:function(t){return e.addAssertDomain()}}},[e._v("新增断言")]):e._e()],1),e.switchInfo.isAssert?e._l(e.addSQLSelectForm.assertDomains,(function(t,a){return r("el-form-item",{key:t.key,staticStyle:{"margin-left":"120px"},attrs:{inline:"",label:"断言"+(a+1),prop:"assertDomains."+a+".name"}},[r("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择表字段"},model:{value:t.name,callback:function(r){e.$set(t,"name",r)},expression:"domain.name"}},e._l(e.keyList,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1),r("el-input",{staticStyle:{width:"35%","margin-left":"20px"},attrs:{placeholder:"请输入预期断言"},model:{value:t.value,callback:function(r){e.$set(t,"value",r)},expression:"domain.value"}}),r("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"danger"},on:{click:function(r){return r.preventDefault(),e.removeAssertDomain(t)}}},[e._v("删除")])],1)})):e._e(),r("el-form-item",{attrs:{label:"SQL参数截取"}},[r("el-switch",{model:{value:e.switchInfo.isParams,callback:function(t){e.$set(e.switchInfo,"isParams",t)},expression:"switchInfo.isParams"}}),e.switchInfo.isParams?r("el-button",{staticStyle:{"margin-left":"50px"},attrs:{type:"primary"},on:{click:function(t){return e.addParamsDomain()}}},[e._v("新增截取")]):e._e()],1),e.switchInfo.isParams?e._l(e.addSQLSelectForm.paramsDomains,(function(t,a){return r("el-form-item",{key:t.key,staticStyle:{"margin-left":"120px"},attrs:{inline:"",label:"截取"+(a+1),prop:"paramsDomains."+a+".name"}},[r("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择表字段"},model:{value:t.name,callback:function(r){e.$set(t,"name",r)},expression:"domain.name"}},e._l(e.keyList,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1),r("el-input",{staticStyle:{width:"35%","margin-left":"20px"},attrs:{placeholder:"请输入引用名"},model:{value:t.value,callback:function(r){e.$set(t,"value",r)},expression:"domain.value"}}),r("el-input",{staticStyle:{width:"35%","margin-left":"20px"},attrs:{placeholder:"请输入引用名描述"},model:{value:t.desc,callback:function(r){e.$set(t,"desc",r)},expression:"domain.desc"}}),r("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"danger"},on:{click:function(r){return r.preventDefault(),e.removeParamsDomain(t)}}},[e._v("删除")])],1)})):e._e()],2),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.SQLSelectDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addSqlSelectComponent()}}},[e._v("确 定")])],1)],1)],1)},Ct=[],kt=(r("c975"),r("a434"),r("b0c0"),{props:["cid"],data:function(){return{loading:!1,addComponentForm:{categoryId:"4"},keyList:[],valueList:[],sqlId:0,addSQLSelectComponentForm:{},dataSourceList:[],SQLSelectDialogVisible:!1,addSQLSelectComponentFormRules:{assertFlag:[{required:!0,message:"请选择断言列",trigger:"blur"}],assertContent:[{required:!0,message:"请输入预期断言",trigger:"blur"}]},addComponentFormRules:{name:[{required:!0,message:"请输入组件名称",trigger:"blur"}],dataSourceId:[{required:!0,message:"请选择数据源",trigger:"blur"}],sqlContent:[{required:!0,message:"请输入SQL语句",trigger:"blur"}],projectId:[{required:!0,message:"请选择项目",trigger:"blur"}]},projectList:[],componentList:[],categoryId:4,addSQLSelectForm:{assertDomains:[{name:"",value:""}],paramsDomains:[{name:"",value:"",desc:""}]},switchInfo:{isAssert:!1,isParams:!1},addSQLSelectRules:{}}},methods:{removeParamsDomain:function(e){var t=this.addSQLSelectForm.paramsDomains.indexOf(e);-1!==t&&this.addSQLSelectForm.paramsDomains.splice(t,1)},addParamsDomain:function(){this.addSQLSelectForm.paramsDomains.push({name:"",value:"",desc:"",key:Date.now()})},removeAssertDomain:function(e){var t=this.addSQLSelectForm.assertDomains.indexOf(e);-1!==t&&this.addSQLSelectForm.assertDomains.splice(t,1)},addAssertDomain:function(){this.addSQLSelectForm.assertDomains.push({name:"",value:"",key:Date.now()})},addSqlSelectComponent:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a,n,o,s,i,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r="",a="",e.switchInfo.isAssert){for(n=0;n<e.addSQLSelectForm.assertDomains.length;n++)r+=e.addSQLSelectForm.assertDomains[n].name+"<==>",a+=e.addSQLSelectForm.assertDomains[n].value+"<==>";r=r.substring(0,r.length-4),a=a.substring(0,a.length-4)}if(o="",s="",i="",e.switchInfo.isParams){for(l=0;l<e.addSQLSelectForm.paramsDomains.length;l++)o+=e.addSQLSelectForm.paramsDomains[l].name+"<==>",s+=e.addSQLSelectForm.paramsDomains[l].value+"<==>",i+=e.addSQLSelectForm.paramsDomains[l].desc+"<==>";o=o.substring(0,o.length-4),s=s.substring(0,s.length-4),i=i.substring(0,i.length-4)}e.addSQLSelectComponentForm.assertFlag=r,e.addSQLSelectComponentForm.assertContent=a,e.addSQLSelectComponentForm.referenceParamFlag=o,e.addSQLSelectComponentForm.referenceParamContent=s,e.addSQLSelectComponentForm.referenceParamDesc=i,console.log(e.addSQLSelectComponentForm),e.$common.post("/addSqlSelectComponent",e.addSQLSelectComponentForm);case 14:case"end":return t.stop()}}),t)})))()},getSQLDate:function(){var e=this;this.$refs.addComponentFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=13;break}return e.loading=!0,t.next=4,e.$common.post("/sqlSelect",e.addComponentForm);case 4:a=t.sent,e.loading=!1,e.keyList=a.data.key,e.valueList=a.data.value,e.addSQLSelectComponentForm=a.total,e.loading=!1,e.SQLSelectDialogVisible=!0,t.next=14;break;case 13:console.log("表单校验码不通过");case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getAllProject:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$common.getAllProject();case 2:r=t.sent,e.projectList=r;case 4:case"end":return t.stop()}}),t)})))()},backFitst:function(){this.lookHeaderAndResponseDialog=!1},closeEditDialog:function(){},getComponentInfo:function(){var e=this;this.$common.getComponentInfoById(this.cid).then((function(t){e.componentInfo=t}))},editGetHeaderAndCookie:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.editCaseFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=6;break}return t.next=3,e.$http.post("/getHeaderAndCookie",e.componentInfo);case 3:a=t.sent,n=a.data,1e4==n.code?(e.componentInfo=n.data,e.lookHeaderAndResponseDialog=!0):e.$message.error(n.msg);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},back:function(){this.$router.push("/caseConfig/component")},editComponent:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.lookHeaderAndResponseRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=8;break}return t.next=3,e.$http.post("/editComponent",e.componentInfo);case 3:a=t.sent,n=a.data,1e4==n.code?(e.$message.success(n.msg),e.$router.push("/caseConfig/component")):e.$message.error(n.mag),t.next=8;break;case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},getComponentList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$common.getAllComponent();case 2:r=t.sent,e.componentList=r;case 4:case"end":return t.stop()}}),t)})))()},getAllDataSource:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$common.getAllDataSource();case 2:e.dataSourceList=t.sent;case 3:case"end":return t.stop()}}),t)})))()}},created:function(){null!=window.sessionStorage.getItem("projectId")&&null!=window.sessionStorage.getItem("projectName")&&(this.$global.currentProjectId=window.sessionStorage.getItem("projectId"),this.$global.currentProjectName=window.sessionStorage.getItem("projectName"),this.addComponentForm.projectId=this.$global.currentProjectId),this.getAllProject(),this.getComponentList(),this.getAllDataSource()}}),St=kt,jt=Object(l["a"])(St,xt,Ct,!1,null,"6abe9a8c",null),$t=jt.exports,Rt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"正在努力调用接口..."}},[r("el-breadcrumb",[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("用例管理")]),r("el-breadcrumb-item",[e._v(e._s("add"==e.cid?"添加":"编辑")+"单接口")])],1),r("el-card",[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:1.5}},[r("el-button",{attrs:{icon:"el-icon-back",type:"primary"},on:{click:function(t){return e.goBack()}}},[e._v("返回")])],1)],1),r("el-form",{ref:"addCaseFormRef",attrs:{rules:e.addFormRules,model:e.addCaseForm,"label-width":"100px"}},[r("el-form-item",{staticClass:"input-center",staticStyle:{"margin-left":"150px"},attrs:{label:"用例名称",prop:"name"}},[r("el-input",{staticStyle:{width:"80%"},attrs:{"prefix-icon":"el-icon-edit",placeholder:"请输入用例名"},model:{value:e.addCaseForm.name,callback:function(t){e.$set(e.addCaseForm,"name",t)},expression:"addCaseForm.name"}})],1),r("el-form-item",{staticClass:"input-center",staticStyle:{"margin-left":"150px"},attrs:{label:"协议类型",prop:"protocolId"}},[r("el-select",{staticStyle:{width:"80%"},attrs:{disabled:"add"!=e.cid,placeholder:"请选择协议"},model:{value:e.addCaseForm.protocolId,callback:function(t){e.$set(e.addCaseForm,"protocolId",t)},expression:"addCaseForm.protocolId"}},e._l(e.protocolsOptions,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),null==this.$global.currentProjectId&&null==this.$global.currentProjectName?r("el-form-item",{staticStyle:{"margin-left":"150px"},attrs:{label:"所属项目",prop:"projectId"}},[r("el-select",{staticStyle:{width:"80%"},attrs:{disabled:"add"!=e.cid,placeholder:"请选择项目"},model:{value:e.addCaseForm.projectId,callback:function(t){e.$set(e.addCaseForm,"projectId",t)},expression:"addCaseForm.projectId"}},e._l(e.projectOptions,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1):r("el-form-item",{staticStyle:{"margin-left":"150px"},attrs:{label:"所属项目",prop:"projectId"}},[r("el-select",{staticStyle:{width:"80%"},attrs:{disabled:"",placeholder:"请选择项目"},model:{value:this.$global.currentProjectName,callback:function(t){e.$set(this.$global,"currentProjectName",t)},expression:"this.$global.currentProjectName"}},e._l(e.projectOptions,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),"add"==e.cid?r("el-form-item",{staticStyle:{"margin-left":"150px"},attrs:{label:"前置用例集",prop:"preCaseGroupId"}},[r("el-select",{staticStyle:{width:"80%"},attrs:{filterable:"",disabled:""==e.addCaseForm.projectId,remote:"","remote-method":e.getCaseGroupList,clearable:"",placeholder:"选择项目后，方可输入用例集名称进行模糊查询"},on:{clear:function(t){return e.clearSelect()}},model:{value:e.addCaseForm.preCaseGroupId,callback:function(t){e.$set(e.addCaseForm,"preCaseGroupId",t)},expression:"addCaseForm.preCaseGroupId"}},e._l(e.caseGroupList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),null!=e.addCaseForm.preCaseGroupId&&""!=e.addCaseForm.preCaseGroupId?r("el-button",{staticStyle:{"margin-left":"1%"},attrs:{type:"success",icon:"el-icon-view"},on:{click:function(t){return e.getCaseGroupInfo(e.addCaseForm.preCaseGroupId)}}}):e._e()],1):r("el-form-item",{staticStyle:{"margin-left":"150px"},attrs:{label:"前置用例集",prop:"preCaseGroupId"}},[r("el-select",{staticStyle:{width:"80%"},attrs:{filterable:"",disabled:"",remote:"","remote-method":e.getCaseGroupList,clearable:"",placeholder:"选择项目后，方可输入用例集名称进行模糊查询"},on:{clear:function(t){return e.clearSelect()}},model:{value:e.preCaseGroupName,callback:function(t){e.preCaseGroupName=t},expression:"preCaseGroupName"}},e._l(e.caseGroupList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),null!=e.addCaseForm.preCaseGroupId&&""!=e.addCaseForm.preCaseGroupId?r("el-button",{staticStyle:{"margin-left":"1%"},attrs:{type:"success",icon:"el-icon-view"},on:{click:function(t){return e.getCaseGroupInfo(e.addCaseForm.preCaseGroupId)}}}):e._e()],1),e.openCaseListFlag&&null!=e.addCaseForm.preCaseGroupId&&""!=e.addCaseForm.preCaseGroupId?r("el-table",{staticStyle:{width:"67%","margin-left":"250px"},attrs:{stripe:"",border:"",data:e.caseListTable}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form",{attrs:{"label-position":"left"}},e._l(t.row.reference,(function(t,a){return r("el-form-item",{key:a,attrs:{label:"参数引用详情"}},[e._v(" 引用名："),r("span",{staticStyle:{color:"red"}},[e._v(e._s(t.referenceName))]),e._v(" ， 引用描述： "),r("span",{staticStyle:{color:"red"}},[e._v(e._s(t.referenceDesc))])])})),1)]}}],null,!1,1547173727)}),r("el-table-column",{attrs:{prop:"pri",label:"执行优先级",width:"100"}}),r("el-table-column",{attrs:{prop:"name",label:"用例名",width:"300"}}),r("el-table-column",{attrs:{prop:"desc",label:"用例描述"}})],1):e._e(),r("br"),r("el-form-item",{staticStyle:{"margin-left":"150px"},attrs:{label:"请求地址",prop:"url"}},[r("el-input",{staticStyle:{width:"80%"},attrs:{disabled:"add"!=e.cid,"prefix-icon":"el-icon-discover",placeholder:"请输入请求地址"},model:{value:e.addCaseForm.url,callback:function(t){e.$set(e.addCaseForm,"url",t)},expression:"addCaseForm.url"}})],1),2==e.addCaseForm.protocolId?r("el-form-item",{staticStyle:{"margin-left":"150px"},attrs:{label:"入参方式",prop:"paramsType"}},[r("el-select",{staticStyle:{width:"80%"},attrs:{disabled:"add"!=e.cid,placeholder:"请选择入参方式,目前只支持json和form表单"},model:{value:e.addCaseForm.paramsType,callback:function(t){e.$set(e.addCaseForm,"paramsType",t)},expression:"addCaseForm.paramsType"}},e._l(e.paramsType,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),2==e.addCaseForm.protocolId&&2==e.addCaseForm.paramsType?r("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.addDomain}},[e._v("新增参数")]):e._e()],1):e._e(),2==e.addCaseForm.protocolId&&2==e.addCaseForm.paramsType?e._l(e.addCaseForm.domains,(function(t,a){return r("el-form-item",{key:t.key,staticStyle:{"margin-left":"120px"},attrs:{inline:"",label:"参数"+(a+1),prop:"domains."+a+".nameValue",rules:{required:!0,message:"参数名不能为空",trigger:"blur"}}},[r("el-input",{staticStyle:{width:"35%"},attrs:{placeholder:"请输入参数名"},model:{value:t.nameValue,callback:function(r){e.$set(t,"nameValue",r)},expression:"domain.nameValue"}}),r("el-input",{staticStyle:{width:"35%","margin-left":"20px"},attrs:{placeholder:"请输入参数值"},model:{value:t.paramValue,callback:function(r){e.$set(t,"paramValue",r)},expression:"domain.paramValue"}}),r("el-button",{staticStyle:{"margin-left":"20px"},on:{click:function(r){return r.preventDefault(),e.removeDomain(t)}}},[e._v("删除")])],1)})):e._e(),2==e.addCaseForm.protocolId&&1==e.addCaseForm.paramsType?r("el-form-item",{staticStyle:{"margin-left":"150px"},attrs:{label:"请求参数",prop:"jsonParams"}},[r("el-input",{staticStyle:{width:"80%"},attrs:{type:"textarea",rows:5,"prefix-icon":"el-icon-key",placeholder:"请输入请求参数"},model:{value:e.addCaseForm.jsonParams,callback:function(t){e.$set(e.addCaseForm,"jsonParams",t)},expression:"addCaseForm.jsonParams"}})],1):e._e(),r("el-form-item",{staticClass:"input-center",staticStyle:{"margin-left":"150px"},attrs:{label:"描述",prop:"desc"}},[r("el-input",{staticStyle:{width:"80%"},attrs:{"prefix-icon":"el-icon-edit",placeholder:"请输入用例名"},model:{value:e.addCaseForm.desc,callback:function(t){e.$set(e.addCaseForm,"desc",t)},expression:"addCaseForm.desc"}})],1)],2),r("div",{staticStyle:{"text-align":"right","margin-right":"17%"}},[r("el-button",{on:{click:function(t){return e.goBack()}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getResponse()}}},[e._v("请 求")])],1)],1),r("el-dialog",{attrs:{"close-on-click-modal":!1,title:"请求详情",visible:e.setAssertCaseDialog,width:"80%"},on:{"update:visible":function(t){e.setAssertCaseDialog=t},close:function(t){return e.closeEdit()}}},[r("span"),r("el-form",{ref:"setAssertCaseFormRef",attrs:{rules:e.setAssertFormRules,model:e.setAssertCaseForm,"label-width":"100px"}},[r("el-form-item",{staticStyle:{"margin-left":"10px","margin-right":"10px"},attrs:{label:"响应报文",prop:"response"}},[r("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.responseStr,callback:function(t){e.responseStr=t},expression:"responseStr"}})],1),r("el-form-item",{attrs:{label:"响应断言"}},[r("el-switch",{model:{value:e.switchInfo.isAssert,callback:function(t){e.$set(e.switchInfo,"isAssert",t)},expression:"switchInfo.isAssert"}}),e.switchInfo.isAssert?r("el-button",{staticStyle:{"margin-left":"50px"},attrs:{type:"primary"},on:{click:e.addAssertDomain}},[e._v("新增断言")]):e._e()],1),e.switchInfo.isAssert?[e._l(e.setAssertCaseForm.assertDomains,(function(t,a){return r("el-form-item",{key:t.key,staticStyle:{"margin-left":"120px"},attrs:{inline:"",label:"断言"+(a+1),prop:"assertDomains."+a+".nameValue",rules:{required:!0,message:"断言表达式不能为空",trigger:"blur"}}},[r("el-input",{staticStyle:{width:"35%"},attrs:{placeholder:"请输入断言表达式"},model:{value:t.nameValue,callback:function(r){e.$set(t,"nameValue",r)},expression:"domain.nameValue"}}),r("el-input",{staticStyle:{width:"35%","margin-left":"10px"},attrs:{placeholder:"请输入预期断言"},model:{value:t.paramValue,callback:function(r){e.$set(t,"paramValue",r)},expression:"domain.paramValue"}}),r("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger"},on:{click:function(r){return r.preventDefault(),e.removeAddAssertDomain(t)}}},[e._v("删除")]),r("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:function(r){return r.preventDefault(),e.queryAssert(a+1,t.nameValue)}}},[e._v("查看断言结果")])],1)})),r("div",{staticStyle:{"margin-left":"250px","margin-bottom":"50px"}},[r("span",{staticStyle:{"font-size":"20px"}},[e._v(" 响应断言 "+e._s(e.assertResultIndex)+" : 【 "),r("span",{staticStyle:{color:"red"}},[e._v(e._s(e.assertResult))]),e._v("】 ")])])]:e._e(),r("el-form-item",{attrs:{label:"参数截取"}},[r("el-switch",{model:{value:e.switchInfo.isReference,callback:function(t){e.$set(e.switchInfo,"isReference",t)},expression:"switchInfo.isReference"}}),e.switchInfo.isReference?r("el-button",{staticStyle:{"margin-left":"50px"},attrs:{type:"primary"},on:{click:e.addParamsDomain}},[e._v("新增参数截取")]):e._e()],1),e.switchInfo.isReference?[e._l(e.setAssertCaseForm.paramsDomains,(function(t,a){return r("el-form-item",{key:t.key,staticStyle:{"margin-left":"120px"},attrs:{inline:"",label:"截取参数"+(a+1),prop:"paramsDomains."+a+".nameValue",rules:{required:!0,message:"截取表达式不能为空",trigger:"blur"}}},[r("el-input",{staticStyle:{width:"20%"},attrs:{placeholder:"请输入截取参数表达式"},model:{value:t.nameValue,callback:function(r){e.$set(t,"nameValue",r)},expression:"domain.nameValue"}}),r("el-input",{staticStyle:{width:"20%","margin-left":"10px"},attrs:{placeholder:"请输入引用名"},model:{value:t.paramValue,callback:function(r){e.$set(t,"paramValue",r)},expression:"domain.paramValue"}}),r("el-input",{staticStyle:{width:"30%","margin-left":"10px"},attrs:{placeholder:"引用描述"},model:{value:t.paramDesc,callback:function(r){e.$set(t,"paramDesc",r)},expression:"domain.paramDesc"}}),r("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger"},on:{click:function(r){return r.preventDefault(),e.removeParamsDomain(t)}}},[e._v("删除")]),r("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:function(r){return r.preventDefault(),e.queryReference(a+1,t.nameValue)}}},[e._v("查看截取参数")])],1)})),r("div",{staticStyle:{"margin-left":"250px"}},[r("span",{staticStyle:{"font-size":"20px"}},[e._v(" 截取参数 "+e._s(e.referenceResultIndex)+" : 【 "),r("span",{staticStyle:{color:"red"}},[e._v(e._s(e.referenceResult))]),e._v("】 ")])])]:e._e()],2),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.setAssertCaseDialog=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addCase()}}},[e._v("确 定")])],1)],1)],1)},_t=[],It={props:["cid"],data:function(){var e=this,t=function(t,r,a){if(e.isJSON(r))return a();a(new Error("JSON格式有误，请检查"))};return{loading:!1,textareaHigh:5,protocolsOptions:[],projectOptions:[],addDialogVisible:!1,addCaseForm:{projectId:"",protocolId:"",name:"",jsonParams:"",postParams:"",header:"",assertFlag:"",assertContent:"",url:"",preComponent:"",postComponent:"",domains:[{nameValue:"",paramValue:""}],paramsType:"",assertDomains:[{nameValue:"",paramValue:""}],paramsDomains:[{nameValue:"",paramValue:"",paramDesc:""}],preCaseGroupIndex:""},paramsDomains:[{nameValue:"",paramValue:"",paramDesc:""}],assertDomains:[{nameValue:"",paramValue:""}],domains:[{nameValue:"",paramValue:""}],paramsType:[{id:1,name:"application/json"},{id:2,name:"application/x-www-form-urlencoded"}],addFormRules:{name:[{required:!0,message:"请输入您的用例名称",trigger:"blur"},{min:2,max:40,message:"长度在 2 到 20 个字符",trigger:"blur"}],protocolId:[{required:!0,message:"请选择协议类型",trigger:"blur"}],projectId:[{required:!0,message:"请选择所属项目",trigger:"blur"}],assertFlag:[{required:!0,message:"请输入断言标志",trigger:"blur"}],assertContent:[{required:!0,message:"请输入断言内容",trigger:"blur"}],url:[{required:!0,message:"请输入请求URL",trigger:"blur"}],jsonParams:[{validator:t,trigger:"blur"}],paramsType:[{required:!0,message:"请选择入参方式",trigger:"blur"}]},setAssertFormRules:{},setAssertCaseDialog:!1,editDialogVisible:!1,caseGroupList:{},queryForm:{query:"",pageNum:1,pageSize:50},responseStr:"",setAssertCaseForm:{},switchInfo:{isAssert:!1,isReference:!1},assertResult:"",assertResultIndex:"",referenceResult:"",referenceResultIndex:"",queryAssertParams:{flag:"",content:""},openCaseListFlag:!1,caseListTable:[],preCaseGroupName:""}},methods:{clearSelect:function(){this.openCaseListFlag=!1},getCaseGroupInfo:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.openCaseListFlag=!t.openCaseListFlag,!t.openCaseListFlag){r.next=6;break}return r.next=4,t.$common.get("/getGroupCaseList?groupId="+e);case 4:a=r.sent,t.caseListTable=a.data;case 6:case"end":return r.stop()}}),r)})))()},getCaseReferenceParams:function(){},isJSON:function(e){if("string"==typeof e){try{var t=JSON.parse(e);return!("object"!=Object(Ce["a"])(t)||!t)}catch(r){return console.log("error："+e+"!!!"+r),!1}return!0}},queryAssert:function(e,t){var r=this;return Object(g["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r.queryAssertParams.flag=t,r.queryAssertParams.content=r.responseStr,a.next=4,r.$common.post("/getAssertResult",r.queryAssertParams);case 4:n=a.sent,1e4==n.code?(r.assertResult=n.data,r.assertResultIndex=e):r.$message.error("断言表达式错误，请检查！");case 6:case"end":return a.stop()}}),a)})))()},queryReference:function(e,t){var r=this;return Object(g["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r.queryAssertParams.flag=t,r.queryAssertParams.content=r.responseStr,a.next=4,r.$common.post("/getAssertResult",r.queryAssertParams);case 4:n=a.sent,1e4==n.code&&(r.referenceResult=n.data,r.referenceResultIndex=e);case 6:case"end":return a.stop()}}),a)})))()},getResponse:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.addCaseFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=10;break}return e.loading=!0,console.log(e.addCaseForm),t.next=5,e.$common.post("/addSingleCaseGetResponse",e.addCaseForm);case 5:a=t.sent,1e4==a.code?(e.responseStr=e.$common.formatJson(a.data.response),e.loading=!1,e.setAssertCaseDialog=!0,e.setAssertCaseForm=a.params):e.$message.error(a.msg),e.loading=!1,t.next=11;break;case 10:console.log("表单检验不通过");case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},goBack:function(){this.$router.push("/case/single")},getCaseGroupList:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.queryForm.query=e,t.queryForm.projectId=t.addCaseForm.projectId,r.next=4,t.$common.get("/getAllCaseGroup",t.queryForm);case 4:a=r.sent,t.caseGroupList=a.data;case 6:case"end":return r.stop()}}),r)})))()},removeDomain:function(e){var t=this.addCaseForm.domains.indexOf(e);-1!==t&&this.addCaseForm.domains.splice(t,1)},addDomain:function(){this.addCaseForm.domains.push({nameValue:"",paramValue:"",key:Date.now()})},addAssertDomain:function(){this.setAssertCaseForm.assertDomains.push({nameValue:"",paramValue:"",key:Date.now()})},addParamsDomain:function(){this.setAssertCaseForm.paramsDomains.push({nameValue:"",paramValue:"",paramDesc:"",key:Date.now()})},removeAddAssertDomain:function(e){var t=this.setAssertCaseForm.assertDomains.indexOf(e);-1!==t&&this.setAssertCaseForm.assertDomains.splice(t,1)},removeParamsDomain:function(e){var t=this.setAssertCaseForm.paramsDomains.indexOf(e);-1!==t&&this.setAssertCaseForm.paramsDomains.splice(t,1)},addCase:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:"add"!=e.cid?e.$refs.setAssertCaseFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=7;break}return t.next=3,e.$common.post("/editCase",e.setAssertCaseForm);case 3:a=t.sent,1e4==a.code?(e.$message.success(a.msg),e.goBack()):e.$message.error(a.msg),t.next=8;break;case 7:console.log("表单校验不通过");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):e.$refs.setAssertCaseFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=7;break}return t.next=3,e.$common.post("/addCase",e.setAssertCaseForm);case 3:a=t.sent,1e4==a.code?(e.$message.success(a.msg),e.goBack()):e.$message.error(a.msg),t.next=8;break;case 7:console.log("表单校验不通过");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},closeEdit:function(){this.$refs.setAssertCaseFormRef.resetFields(),this.textareaHigh=4},getProtocol:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/getAllProtocol");case 2:r=t.sent,a=r.data,e.protocolsOptions=a.data;case 5:case"end":return t.stop()}}),t)})))()},getProject:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$common.getAllProject().then((function(t){e.projectOptions=t}));case 1:case"end":return t.stop()}}),t)})))()},getCaseById:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("add"==e.cid){t.next=12;break}return t.next=3,e.$common.get("/getCaseById?id="+e.cid);case 3:r=t.sent,e.addCaseForm=r.data,e.switchInfo.isAssert=r.total,e.switchInfo.isReference=r.extend,null!=r.params&&(e.preCaseGroupName=r.params.name),r.total||(e.addCaseForm.assertDomains=e.assertDomains),r.extend||(e.addCaseForm.paramsDomains=e.paramsDomains),t.next=13;break;case 12:console.log("添加用例");case 13:case"end":return t.stop()}}),t)})))()}},created:function(){null!=window.sessionStorage.getItem("projectId")&&null!=window.sessionStorage.getItem("projectName")&&(this.$global.currentProjectId=window.sessionStorage.getItem("projectId"),this.$global.currentProjectName=window.sessionStorage.getItem("projectName"),this.addCaseForm.projectId=this.$global.currentProjectId),this.getProtocol(),this.getProject(),this.getCaseById()},beforeRouteLeave:function(e,t,r){e.meta.keepAlive=!1,r()}},Lt=It,Ft=Object(l["a"])(Lt,Rt,_t,!1,null,"703e9107",null),Pt=Ft.exports;a["default"].use(d["a"]);var Dt=[{path:"/login",component:w},{path:"/",redirect:"/home"},{path:"/home",component:S,redirect:"/welcome",children:[{path:"/welcome",component:L},{path:"/case/single",component:G,meta:{keepAlive:!0}},{path:"/case/single/action/:cid",component:Pt,props:!0,meta:{keepAlive:!1}},{path:"/case/group",component:B,meta:{keepAlive:!0}},{path:"/case/database",component:Y,meta:{keepAlive:!0}},{path:"/case/executeRecoding/:cid",component:yt,props:!0,meta:{keepAlive:!1}},{path:"/project/single",component:te,meta:{keepAlive:!0}},{path:"/project/group",component:ie,meta:{keepAlive:!0}},{path:"/caseConfig/params",component:me,meta:{keepAlive:!0}},{path:"/caseConfig/component",component:ve,meta:{keepAlive:!1}},{path:"/caseConfig/component/sqlSelectComponent",component:$t,meta:{keepAlive:!1}},{path:"/caseConfig/dataSource",component:$e,meta:{keepAlive:!0}},{path:"/task/job",component:Pe,meta:{keepAlive:!0}},{path:"/task/report",component:Ne,meta:{keepAlive:!0}},{path:"/utils/quanwai",component:Ue,meta:{keepAlive:!0}},{path:"/utils/common",component:Ze,meta:{keepAlive:!0}},{path:"/config/user",component:rt,meta:{keepAlive:!0}},{path:"/config/permission",component:lt,meta:{keepAlive:!0}},{path:"/config/user/userInfo/:uid",component:gt,props:!0}]}],Ot=new d["a"]({routes:Dt}),qt=Ot,Gt=(r("0fb7"),r("450d"),r("f529")),At=r.n(Gt),Nt=(r("9e1f"),r("6ed5")),Tt=r.n(Nt),Et=(r("9c49"),r("6640")),zt=r.n(Et),Vt=(r("d2ac"),r("95b0")),Bt=r.n(Vt),Ut=(r("06f1"),r("6ac9")),Jt=r.n(Ut),Qt=(r("0fb4"),r("9944")),Mt=r.n(Qt),Ht=(r("826b"),r("c263")),Yt=r.n(Ht),Zt=(r("be4f"),r("896a")),Wt=r.n(Zt),Kt=(r("6611"),r("e772")),Xt=r.n(Kt),er=(r("1f1a"),r("4e4b")),tr=r.n(er),rr=(r("cbb5"),r("8bbc")),ar=r.n(rr),nr=(r("a7cc"),r("df33")),or=r.n(nr),sr=(r("672e"),r("101e")),ir=r.n(sr),lr=(r("0c67"),r("299c")),cr=r.n(lr),ur=(r("e960"),r("b35b")),dr=r.n(ur),pr=(r("5466"),r("ecdf")),mr=r.n(pr),gr=(r("38a0"),r("ad41")),fr=r.n(gr),hr=(r("f4f9"),r("c2cc")),br=r.n(hr),wr=(r("7a0f"),r("0f6c")),vr=r.n(wr),yr=(r("b8e0"),r("a4c4")),xr=r.n(yr),Cr=(r("b84d"),r("c216")),kr=r.n(Cr),Sr=(r("8f24"),r("76b9")),jr=r.n(Sr),$r=(r("8bd8"),r("4cb2")),Rr=r.n($r),_r=(r("34db"),r("3803")),Ir=r.n(_r),Lr=(r("ce18"),r("f58e")),Fr=r.n(Lr),Pr=(r("4ca3"),r("443e")),Dr=r.n(Pr),Or=(r("de31"),r("c69e")),qr=r.n(Or),Gr=(r("a769"),r("5cc3")),Ar=r.n(Gr),Nr=(r("a673"),r("7b31")),Tr=r.n(Nr),Er=(r("adec"),r("3d2d")),zr=r.n(Er),Vr=(r("10cb"),r("f3ad")),Br=r.n(Vr),Ur=(r("eca7"),r("3787")),Jr=r.n(Ur),Qr=(r("425f"),r("4105")),Mr=r.n(Qr),Hr=(r("1951"),r("eedf")),Yr=r.n(Hr);a["default"].use(Yr.a),a["default"].use(Mr.a),a["default"].use(Jr.a),a["default"].use(Br.a),a["default"].use(zr.a),a["default"].use(Tr.a),a["default"].use(Ar.a),a["default"].use(qr.a),a["default"].use(Dr.a),a["default"].use(Fr.a),a["default"].use(Ir.a),a["default"].use(Rr.a),a["default"].use(jr.a),a["default"].use(kr.a),a["default"].use(xr.a),a["default"].use(vr.a),a["default"].use(br.a),a["default"].use(fr.a),a["default"].use(mr.a),a["default"].use(dr.a),a["default"].use(cr.a),a["default"].use(ir.a),a["default"].use(or.a),a["default"].use(ar.a),a["default"].use(tr.a),a["default"].use(Xt.a),a["default"].use(Wt.a),a["default"].use(Yt.a),a["default"].use(Mt.a),a["default"].use(Jt.a),a["default"].use(Bt.a),a["default"].use(zt.a),a["default"].prototype.$confirm=Tt.a.confirm,a["default"].prototype.$alert=Tt.a.alert,a["default"].prototype.$message=At.a;r("aede");var Zr=r("bc3a"),Wr=r.n(Zr),Kr=(r("4160"),r("a15b"),r("fb6a"),r("ac1f"),r("466d"),r("5319"),r("1276"),r("498a"),r("159b"),r("5ce8"),{test:function(){console.log("common测试")},test1:function(e){console.log(e)},getAllDataSource:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Wr.a.get("/getDataSourceConfig");case 2:if(t=e.sent,r=t.data,1e4!=r.code){e.next=8;break}return e.abrupt("return",r.data);case 8:aa.$message.error(r.msg);case 9:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),getAllProtocol:function(){return Object(g["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Wr.a.get("/getAllProtocol");case 2:if(t=e.sent,r=t.data,1e4!=r.code){e.next=8;break}return e.abrupt("return",r.data);case 8:aa.$message.error(r.msg);case 9:case"end":return e.stop()}}),e)})))()},getAllProject:function(){return Object(g["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Wr.a.get("/getAllProject");case 2:if(t=e.sent,r=t.data,1e4!=r.code){e.next=8;break}return e.abrupt("return",r.data);case 8:aa.$message.error(r.msg);case 9:case"end":return e.stop()}}),e)})))()},getComponentInfoById:function(e){return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Wr.a.get("/getComponentById?id="+e);case 2:if(r=t.sent,a=r.data,1e4!=a.code){t.next=8;break}return t.abrupt("return",a.data);case 8:aa.$message.error(a.msg);case 9:case"end":return t.stop()}}),t)})))()},get:function(e,t){return Object(g["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Wr.a.get(e,{params:t});case 2:if(a=r.sent,200!=a.status){r.next=7;break}return r.abrupt("return",a.data);case 7:aa.$message.error("服务器繁忙，请稍后重试");case 8:case"end":return r.stop()}}),r)})))()},post:function(e,t){return Object(g["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Wr.a.post(e,t);case 2:if(a=r.sent,200!=a.status){r.next=7;break}return r.abrupt("return",a.data);case 7:return aa.$message.error("服务器繁忙，请稍后重试"),r.abrupt("return",a.data);case 9:case"end":return r.stop()}}),r)})))()},getAllComponent:function(){return Object(g["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Wr.a.get("/getComponentList");case 2:if(t=e.sent,200!=t.status){e.next=11;break}if(1e4!=t.data.code){e.next=8;break}return e.abrupt("return",t.data.data);case 8:aa.$message.error(t.data.msg);case 9:e.next=12;break;case 11:aa.$message.error("服务器繁忙，请稍后重试");case 12:case"end":return e.stop()}}),e)})))()},isJSON:function(e){if("string"==typeof e){try{var t=JSON.parse(e);return!("object"!=Object(Ce["a"])(t)||!t)}catch(r){return console.log("error："+e+"!!!"+r),!1}return!0}},checkSessionProject:function(){null!=window.sessionStorage.getItem("projectId")&&null!=window.sessionStorage.getItem("projectName")&&(this.$global.currentProjectId=window.sessionStorage.getItem("projectId"),this.$global.currentProjectName=window.sessionStorage.getItem("projectName"))},formatJson:function(e){var t="",r=0,a="    ",n=e;if(!n)return n;var o=[],s=null,i=null,l=[];return n=n.replace(/([\{\}])/g,"\r\n$1\r\n"),n=n.replace(/([\[\]])/g,"\r\n$1\r\n"),n=n.replace(/(\,)/g,"$1\r\n"),n=n.replace(/(\r\n\r\n)/g,"\r\n"),n=n.replace(/\r\n\,/g,","),l=n.split("\r\n"),l.forEach((function(e,t){var r=e.match(/\"/g)?e.match(/\"/g).length:0;r%2&&!s&&(s=t),r%2&&s&&s!=t&&(i=t),s&&i&&(o.push({start:s,end:i}),s=null,i=null)})),o.reverse().forEach((function(e,t){var r=l.slice(e.start,e.end+1);l.splice(e.start,e.end+1-e.start,r.join(""))})),n=l.join("\r\n"),n=n.replace(/\:\r\n\{/g,":{"),n=n.replace(/\:\r\n\[/g,":["),l=n.split("\r\n"),l.forEach((function(e,n){var o=0,s=0,i="";for(e.match(/\{$/)||e.match(/\[$/)?s+=1:e.match(/\}$/)||e.match(/\]$/)||e.match(/\},$/)||e.match(/\],$/)?0!==r&&(r-=1):s=0,o=0;o<r;o++)i+=a;t+=i+e+"\r\n",r+=s})),t.trim()}}),Xr=null,ea=null,ta={currentProjectId:Xr,currentProjectName:ea};Wr.a.defaults.baseURL="http://localhost:8989/quanwai/test/",a["default"].prototype.$http=Wr.a,a["default"].prototype.$common=Kr,a["default"].prototype.$global=ta,a["default"].config.productionTip=!1;var ra=new a["default"]({router:qt,render:function(e){return e(u)}}).$mount("#app"),aa=t["default"]=ra},6055:function(e,t,r){},"71a2":function(e,t,r){},aede:function(e,t,r){},b515:function(e,t,r){"use strict";var a=r("71a2"),n=r.n(a);n.a},da50:function(e,t,r){e.exports=r.p+"img/testLogo.26185c3d.jpg"}});
//# sourceMappingURL=app.8945044d.js.map